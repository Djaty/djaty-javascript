{"version":3,"sources":["jsAgentCoreDjaty.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_classCallCheck","instance","Constructor","TypeError","_typeof2","Symbol","iterator","obj","constructor","prototype","_typeof","Djaty","libs","name","path","djatyLibs","require","define","exports","oldLibs","forEach","lib","window","undefined","LIBVERSION","EMPTY","UNKNOWN","FUNC_TYPE","UNDEF_TYPE","OBJ_TYPE","STR_TYPE","MAJOR","MODEL","NAME","TYPE","VENDOR","VERSION","ARCHITECTURE","CONSOLE","MOBILE","TABLET","SMARTTV","WEARABLE","EMBEDDED","util","extend","regexes","extensions","margedRegexes","concat","has","str1","str2","toLowerCase","indexOf","lowerize","str","major","version","replace","split","trim","mapper","rgx","ua","arrays","j","k","p","q","matches","match","regex","props","exec","this","call","test","_str","map","maps","browser","oldsafari","1.0","1.2","1.3","2.0","2.0.2","2.0.3","2.0.4","?","device","amazon","model","Fire Phone","sprint","Evo Shift 4G","vendor","HTC","Sprint","os","windows","ME","NT 3.11","NT 4.0","2000","XP","Vista","7","8","8.1","10","RT","cpu","engine","UAParser","uastring","getResult","navigator","userAgent","rgxmap","getBrowser","getCPU","architecture","getDevice","type","getEngine","getOS","getUA","setUA","BROWSER","CPU","DEVICE","ENGINE","OS","module","amd","$","jQuery","Zepto","parser","get","set","result","prop","root","NODE_JS","process","versions","node","global","COMMON_JS","JS_SHA256_TEST","HEX_CHARS","EXTRA","SHIFT","K","blocks","sha224","message","sha256","is224","notString","ArrayBuffer","Uint8Array","h0","h1","h2","h3","h4","h5","h6","h7","block","code","s0","s1","maj","t1","t2","ch","ab","da","cd","bc","first","end","index","start","bytes","charCodeAt","a","b","c","d","e","f","g","h","hex","utils","assign","find","key","value","Error","filter","getEventHandler","handler","isInstanceOf","ev","getElementFromSelectorOrEl","label","selectorOrEl","tagName","arguments","lookup","document","elements","querySelectorAll","isDomElement","assertValidOpts","optStruct","opt","forOwn","attr","curStruct","optAttr","allowedValues","required","properties","toString","childType","child","optChildsStruct","optChilds","join","resolveProperty","tracker","formattedObj","propName","data","trackingOptions","normalizedPointerPos","axis","ptr","axisUC","toUpperCase","normalizedEvent","touches","scrollStr","docElScroll","documentElement","bodyElScroll","body","scrollVal","asyncLoop","funcArr","initArgs","ctx","doneCb","next","_len","args","_key","apply","newArgs","convertStrToPair","splitter","op","keyValueArray","strList","keyValue","push","appendIntoOrCreateDjaty","element","djatyEl","querySelector","appendChild","createElement","className","classList","add","someObject","object","cb","Object","hasOwnProperty","x","_ajax","method","reqUrl","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","status","responseText","response","JSON","parse","err","send","spinner","isSpin","externalMethodHandler","nodeListeners","init","spin","text","_this","actions","spinnerEl","_getSpinnerEl","remove","spinnerActions","spinnerText","innerHTML","action","btn","innerText","info","infoSpan","title","addEventListenerAndSaveIt","eventName","callMethod","logger","stopSpin","listen","originalRemoveEventListener","contains","tpl","div","removeCircular","throwsMessage","safeGetValueFromPropertyOnObject","property","hasProp","error","visit","seen","HTMLElement","stack","toJSON","keys","reduce","sizeOfObject","limit","recurse","size","objectList","exceedLimit","uniqueStr","limitString","substring","generateSelect2El","selector","options","select2El","select2","isSelected","item","optionEl","id","html","selected","append","on","dropdown","_positionDropdown","disabled","val","trigger","browserData","getData","dataStores","store","storeData","cookies","cookie","localStorage","DjatyTracking","buffer","bufferRequests","numberOfRetry","isInitialized","timeOutRef","elementsPerRequest","bufferRequestLimit","serverDelayTime","offset","autoSubmittedErrorEndPoint","projectId","appendedData","shouldBeDestroyed","constants","destroy","clearTimeout","manageBuffer","request","config","apiKey","shift","patch","bestLength","agentDataPatch","slice","_submitRequest","strPatch","stringify","removeEmail","privacyPlaceHolder","url","bugsURL","api","apiBugsUrl","djatyAjax","_serverError","IndexOfRequest","splice","_this2","delayTime","Math","pow","djatySetTimeout","throttle","requests","timeoutRef","delayTimePerRequest","elementsForAllRequests","ManageThrottling","serveAllRequests","trackingApp","trackers","isInitiated","agentId","agentVersion","throttleModule","submitterCb","initApp","memoryStorage","getTryCatchHandler","addInFrontOfSubmitHandler","_filterSecret","agentConstData","getAgentConstData","autoReport","_autoReport","_agentConstData","release","usedTrackerInAutoReport","timelineFormatter","bind","autoReportModule","itemType","localStorageWrapper","LocalStorageWrapper","itemKey","itemValue","initialFormData","formItem","form","_formatInitAppTimelineItems","timeline","regCoreTrackingCb","_onTrackingCb","timelineLimit","unshift","itemIndex","_ref","isIgnored","state","hash","repetitionCount","getErrorData","_errorData","reqId","_handleSendingData","errorData","_getErrorDataToIdx","addTracker","isTimelineIgnored","ignoreTimelineItem","clonedFormattedItem","console","originalMethods","trackConsole","isIgnoredError","ignoredErrors","some","ignoredError","registerMemoryStorage","storage","registerLocalStorage","regOnSubmitCb","setNamespace","ns","structure","types","constrains","maxLength","minLength","validate","namespace","getNamespace","setAPIKey","getAllowAutoSubmissionState","allowAutoSubmission","setAllowAutoSubmissionState","setExtensionState","isExtension","getJSFrontendAgentConfig","jsFrontendConfig","getTrackingData","browserLocalData","propValue","propKey","requestSizeLimit","user","_getUser","timelineData","curUrl","location","href","customData","globalCustomData","constData","screen","colorDepth","screenSize","innerWidth","innerHeight","hashType","getFilteredData","onSubmitHandlers","addCustomData","_handleInsertItemIntoTimeline","app","lastItem","isLastItem","trimmingItemType","currentData","filteredData","djatyBugReport","rawData","addCustomDataCb","dataCb","lastItemIndex","lastTimelineItem","longTitle","shortTitle","lastBugShortTitle","bugType","_ref2","_errorData2","_find","target","_replaceIfFound","removeSecretData","secretItem","_resolveIfFound","_filterAjax","secretDataStr","RegExp","openParams","ajax","headers","header","queryParams","queryParam","requestPayload","FormData","formattedPayload","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_loop","pair","_iterator","entries","done","bugReport","sessionStorage","inputs","input","values","select","selectIdx","container","memoryObj","djatyLocalStorage","localStorageStr","getItem","localStorageObj","setItem","_createClass","defineProperties","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","ajaxTracker","pendingRequests","reqArgs","ajaxCookie","_formatTimelinePendingObj","Event","_formatTimelineFinishedObj","reqTimelineItem","_isTypeAllowed","isAborted","time","paramUrl","djatyRegId","getDjatyReqId","queryParamsObj","_getFullURL","openParamsProp","openArgs","param","timestamp","statusText","headersData","requestHeaders","payload","requestTime","timelineItemIndex","allowedResp","responseType","responseURL","withCredentials","responseHeaders","_timelineItemIndex","URL","pathname","titleLimit","tmpAnchorElement","consoleTracker","attrName","_formatTimelineObj","Date","now","sizeObject","consoleParams","isTrimmed","stringifiedParams","substr","history","origin","formTracker","_ref$time","isPwdForm","inputTypes","nodeName","checked","selectedOptions","option","existingField","inputInfo","placeholder","formKey","fileTracker","src","fileStatus","file","exceptionTracker","_ref$err","msg","frameList","_Djaty$trackingApp$ge","stackframes","frame","functionName","stacktraceLimit","exception","details","stringifiedStack","navigationTracker","currentTime","curPageUrl","pageTitle","navigation","clickTracker","elementPath","getElementPath","elementPathMaxLength","el","elNumber","parentElement","elName","toLocaleLowerCase","elClassList","click","logsFormattingCb","exceptionFormattingCb","loggerTimelineItems","logErrorParams","errorMessage","reportDjatyCrashes","_addItemToTimeline","clientProjectApiKey","stringifiedPayload","formattingCb","logTimeline","loggedErrors","tmpTimeline","registerAutoReportCb","removeAutoReportCb"],"mappings":"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","file":"jsAgentCoreDjaty.js","sourcesContent":["'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nDjaty.libs = {};\n\nvar libs = [{\n    name: 'UAParser',\n    path: '../../bower_components/ua-parser-js/src/ua-parser.js'\n}, {\n    name: 'sha256',\n    path: '../../bower_components/js-sha256/src/sha256.js'\n}];\n\n// eslint-disable-next-line no-unused-vars\n(function libWrapper(Djaty, djatyLibs, require, define, exports) {\n    var oldLibs = {};\n    djatyLibs.forEach(function (lib) {\n        var name = lib.name;\n        oldLibs[name] = window[name];\n    });\n\n    /*!\n    * UAParser.js v0.7.19\n    * Lightweight JavaScript-based User-Agent string parser\n    * https://github.com/faisalman/ua-parser-js\n    *\n    * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>\n    * Dual licensed under GPLv2 or MIT\n    */\n\n    (function (window, undefined) {\n\n        'use strict';\n\n        //////////////\n        // Constants\n        /////////////\n\n\n        var LIBVERSION = '0.7.19',\n            EMPTY = '',\n            UNKNOWN = '?',\n            FUNC_TYPE = 'function',\n            UNDEF_TYPE = 'undefined',\n            OBJ_TYPE = 'object',\n            STR_TYPE = 'string',\n            MAJOR = 'major',\n            // deprecated\n        MODEL = 'model',\n            NAME = 'name',\n            TYPE = 'type',\n            VENDOR = 'vendor',\n            VERSION = 'version',\n            ARCHITECTURE = 'architecture',\n            CONSOLE = 'console',\n            MOBILE = 'mobile',\n            TABLET = 'tablet',\n            SMARTTV = 'smarttv',\n            WEARABLE = 'wearable',\n            EMBEDDED = 'embedded';\n\n        ///////////\n        // Helper\n        //////////\n\n\n        var util = {\n            extend: function extend(regexes, extensions) {\n                var margedRegexes = {};\n                for (var i in regexes) {\n                    if (extensions[i] && extensions[i].length % 2 === 0) {\n                        margedRegexes[i] = extensions[i].concat(regexes[i]);\n                    } else {\n                        margedRegexes[i] = regexes[i];\n                    }\n                }\n                return margedRegexes;\n            },\n            has: function has(str1, str2) {\n                if (typeof str1 === \"string\") {\n                    return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;\n                } else {\n                    return false;\n                }\n            },\n            lowerize: function lowerize(str) {\n                return str.toLowerCase();\n            },\n            major: function major(version) {\n                return (typeof version === 'undefined' ? 'undefined' : _typeof(version)) === STR_TYPE ? version.replace(/[^\\d\\.]/g, '').split(\".\")[0] : undefined;\n            },\n            trim: function trim(str) {\n                return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n            }\n        };\n\n        ///////////////\n        // Map helper\n        //////////////\n\n\n        var mapper = {\n\n            rgx: function rgx(ua, arrays) {\n\n                //var result = {},\n                var i = 0,\n                    j,\n                    k,\n                    p,\n                    q,\n                    matches,\n                    match; //, args = arguments;\n\n                /*// construct object barebones\n                for (p = 0; p < args[1].length; p++) {\n                    q = args[1][p];\n                    result[typeof q === OBJ_TYPE ? q[0] : q] = undefined;\n                }*/\n\n                // loop through all regexes maps\n                while (i < arrays.length && !matches) {\n\n                    var regex = arrays[i],\n                        // even sequence (0,2,4,..)\n                    props = arrays[i + 1]; // odd sequence (1,3,5,..)\n                    j = k = 0;\n\n                    // try matching uastring with regexes\n                    while (j < regex.length && !matches) {\n\n                        matches = regex[j++].exec(ua);\n\n                        if (!!matches) {\n                            for (p = 0; p < props.length; p++) {\n                                match = matches[++k];\n                                q = props[p];\n                                // check if given property is actually array\n                                if ((typeof q === 'undefined' ? 'undefined' : _typeof(q)) === OBJ_TYPE && q.length > 0) {\n                                    if (q.length == 2) {\n                                        if (_typeof(q[1]) == FUNC_TYPE) {\n                                            // assign modified match\n                                            this[q[0]] = q[1].call(this, match);\n                                        } else {\n                                            // assign given value, ignore regex match\n                                            this[q[0]] = q[1];\n                                        }\n                                    } else if (q.length == 3) {\n                                        // check whether function or regex\n                                        if (_typeof(q[1]) === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                            // call function (usually string mapper)\n                                            this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                        } else {\n                                            // sanitize match using given regex\n                                            this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                        }\n                                    } else if (q.length == 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                    }\n                                } else {\n                                    this[q] = match ? match : undefined;\n                                }\n                            }\n                        }\n                    }\n                    i += 2;\n                }\n                // console.log(this);\n                //return this;\n            },\n\n            str: function str(_str, map) {\n\n                for (var i in map) {\n                    // check if array\n                    if (_typeof(map[i]) === OBJ_TYPE && map[i].length > 0) {\n                        for (var j = 0; j < map[i].length; j++) {\n                            if (util.has(map[i][j], _str)) {\n                                return i === UNKNOWN ? undefined : i;\n                            }\n                        }\n                    } else if (util.has(map[i], _str)) {\n                        return i === UNKNOWN ? undefined : i;\n                    }\n                }\n                return _str;\n            }\n        };\n\n        ///////////////\n        // String map\n        //////////////\n\n\n        var maps = {\n\n            browser: {\n                oldsafari: {\n                    version: {\n                        '1.0': '/8',\n                        '1.2': '/1',\n                        '1.3': '/3',\n                        '2.0': '/412',\n                        '2.0.2': '/416',\n                        '2.0.3': '/417',\n                        '2.0.4': '/419',\n                        '?': '/'\n                    }\n                }\n            },\n\n            device: {\n                amazon: {\n                    model: {\n                        'Fire Phone': ['SD', 'KF']\n                    }\n                },\n                sprint: {\n                    model: {\n                        'Evo Shift 4G': '7373KT'\n                    },\n                    vendor: {\n                        'HTC': 'APA',\n                        'Sprint': 'Sprint'\n                    }\n                }\n            },\n\n            os: {\n                windows: {\n                    version: {\n                        'ME': '4.90',\n                        'NT 3.11': 'NT3.51',\n                        'NT 4.0': 'NT4.0',\n                        '2000': 'NT 5.0',\n                        'XP': ['NT 5.1', 'NT 5.2'],\n                        'Vista': 'NT 6.0',\n                        '7': 'NT 6.1',\n                        '8': 'NT 6.2',\n                        '8.1': 'NT 6.3',\n                        '10': ['NT 6.4', 'NT 10.0'],\n                        'RT': 'ARM'\n                    }\n                }\n            }\n        };\n\n        //////////////\n        // Regex map\n        /////////////\n\n\n        var regexes = {\n\n            browser: [[\n\n            // Presto based\n            /(opera\\smini)\\/([\\w\\.-]+)/i, // Opera Mini\n            /(opera\\s[mobiletab]+).+version\\/([\\w\\.-]+)/i, // Opera Mobi/Tablet\n            /(opera).+version\\/([\\w\\.]+)/i, // Opera > 9.80\n            /(opera)[\\/\\s]+([\\w\\.]+)/i // Opera < 9.80\n            ], [NAME, VERSION], [/(opios)[\\/\\s]+([\\w\\.]+)/i // Opera mini on iphone >= 8.0\n            ], [[NAME, 'Opera Mini'], VERSION], [/\\s(opr)\\/([\\w\\.]+)/i // Opera Webkit\n            ], [[NAME, 'Opera'], VERSION], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i, // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?([\\w\\.]*)/i,\n            // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n\n            // Trident based\n            /(avant\\s|iemobile|slim|baidu)(?:browser)?[\\/\\s]?([\\w\\.]*)/i,\n            // Avant/IEMobile/SlimBrowser/Baidu\n            /(?:ms|\\()(ie)\\s([\\w\\.]+)/i, // Internet Explorer\n\n            // Webkit/KHTML based\n            /(rekonq)\\/([\\w\\.]*)/i, // Rekonq\n            /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\\/([\\w\\.-]+)/i\n            // Chromium/Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser\n            ], [NAME, VERSION], [/(trident).+rv[:\\s]([\\w\\.]+).+like\\sgecko/i // IE11\n            ], [[NAME, 'IE'], VERSION], [/(edge|edgios|edga)\\/((\\d+)?[\\w\\.]+)/i // Microsoft Edge\n            ], [[NAME, 'Edge'], VERSION], [/(yabrowser)\\/([\\w\\.]+)/i // Yandex\n            ], [[NAME, 'Yandex'], VERSION], [/(puffin)\\/([\\w\\.]+)/i // Puffin\n            ], [[NAME, 'Puffin'], VERSION], [/(focus)\\/([\\w\\.]+)/i // Firefox Focus\n            ], [[NAME, 'Firefox Focus'], VERSION], [/(opt)\\/([\\w\\.]+)/i // Opera Touch\n            ], [[NAME, 'Opera Touch'], VERSION], [/((?:[\\s\\/])uc?\\s?browser|(?:juc.+)ucweb)[\\/\\s]?([\\w\\.]+)/i // UCBrowser\n            ], [[NAME, 'UCBrowser'], VERSION], [/(comodo_dragon)\\/([\\w\\.]+)/i // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [/(micromessenger)\\/([\\w\\.]+)/i // WeChat\n            ], [[NAME, 'WeChat'], VERSION], [/(brave)\\/([\\w\\.]+)/i // Brave browser\n            ], [[NAME, 'Brave'], VERSION], [/(qqbrowserlite)\\/([\\w\\.]+)/i // QQBrowserLite\n            ], [NAME, VERSION], [/(QQ)\\/([\\d\\.]+)/i // QQ, aka ShouQ\n            ], [NAME, VERSION], [/m?(qqbrowser)[\\/\\s]?([\\w\\.]+)/i // QQBrowser\n            ], [NAME, VERSION], [/(BIDUBrowser)[\\/\\s]?([\\w\\.]+)/i // Baidu Browser\n            ], [NAME, VERSION], [/(2345Explorer)[\\/\\s]?([\\w\\.]+)/i // 2345 Browser\n            ], [NAME, VERSION], [/(MetaSr)[\\/\\s]?([\\w\\.]+)/i // SouGouBrowser\n            ], [NAME], [/(LBBROWSER)/i // LieBao Browser\n            ], [NAME], [/xiaomi\\/miuibrowser\\/([\\w\\.]+)/i // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI Browser']], [/;fbav\\/([\\w\\.]+);/i // Facebook App for iOS & Android\n            ], [VERSION, [NAME, 'Facebook']], [/safari\\s(line)\\/([\\w\\.]+)/i, // Line App for iOS\n            /android.+(line)\\/([\\w\\.]+)\\/iab/i // Line App for Android\n            ], [NAME, VERSION], [/headlesschrome(?:\\/([\\w\\.]+)|\\s)/i // Chrome Headless\n            ], [VERSION, [NAME, 'Chrome Headless']], [/\\swv\\).+(chrome)\\/([\\w\\.]+)/i // Chrome WebView\n            ], [[NAME, /(.+)/, '$1 WebView'], VERSION], [/((?:oculus|samsung)browser)\\/([\\w\\.]+)/i], [[NAME, /(.+(?:g|us))(.+)/, '$1 $2'], VERSION], [// Oculus / Samsung Browser\n\n            /android.+version\\/([\\w\\.]+)\\s+(?:mobile\\s?safari|safari)*/i // Android Browser\n            ], [VERSION, [NAME, 'Android Browser']], [/(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?([\\w\\.]+)/i\n            // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [/(dolfin)\\/([\\w\\.]+)/i // Dolphin\n            ], [[NAME, 'Dolphin'], VERSION], [/((?:android.+)crmo|crios)\\/([\\w\\.]+)/i // Chrome for Android/iOS\n            ], [[NAME, 'Chrome'], VERSION], [/(coast)\\/([\\w\\.]+)/i // Opera Coast\n            ], [[NAME, 'Opera Coast'], VERSION], [/fxios\\/([\\w\\.-]+)/i // Firefox for iOS\n            ], [VERSION, [NAME, 'Firefox']], [/version\\/([\\w\\.]+).+?mobile\\/\\w+\\s(safari)/i // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [/version\\/([\\w\\.]+).+?(mobile\\s?safari|safari)/i // Safari & Safari Mobile\n            ], [VERSION, NAME], [/webkit.+?(gsa)\\/([\\w\\.]+).+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i // Google Search Appliance on iOS\n            ], [[NAME, 'GSA'], VERSION], [/webkit.+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i // Safari < 3.0\n            ], [NAME, [VERSION, mapper.str, maps.browser.oldsafari.version]], [/(konqueror)\\/([\\w\\.]+)/i, // Konqueror\n            /(webkit|khtml)\\/([\\w\\.]+)/i], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape)\\/([\\w\\.-]+)/i // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [/(swiftfox)/i, // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?([\\w\\.\\+]+)/i,\n            // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([\\w\\.-]+)$/i,\n\n            // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(mozilla)\\/([\\w\\.]+).+rv\\:.+gecko\\/\\d+/i, // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\\/\\s]?([\\w\\.]+)/i,\n            // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir\n            /(links)\\s\\(([\\w\\.]+)/i, // Links\n            /(gobrowser)\\/?([\\w\\.]*)/i, // GoBrowser\n            /(ice\\s?browser)\\/v?([\\w\\._]+)/i, // ICE Browser\n            /(mosaic)[\\/\\s]([\\w\\.]+)/i // Mosaic\n            ], [NAME, VERSION]\n\n            /* /////////////////////\n            // Media players BEGIN\n            ////////////////////////\n             , [\n             /(apple(?:coremedia|))\\/((\\d+)[\\w\\._]+)/i,                          // Generic Apple CoreMedia\n            /(coremedia) v((\\d+)[\\w\\._]+)/i\n            ], [NAME, VERSION], [\n             /(aqualung|lyssna|bsplayer)\\/((\\d+)?[\\w\\.-]+)/i                     // Aqualung/Lyssna/BSPlayer\n            ], [NAME, VERSION], [\n             /(ares|ossproxy)\\s((\\d+)[\\w\\.-]+)/i                                 // Ares/OSSProxy\n            ], [NAME, VERSION], [\n             /(audacious|audimusicstream|amarok|bass|core|dalvik|gnomemplayer|music on console|nsplayer|psp-internetradioplayer|videos)\\/((\\d+)[\\w\\.-]+)/i,\n                                                                                // Audacious/AudiMusicStream/Amarok/BASS/OpenCORE/Dalvik/GnomeMplayer/MoC\n                                                                                // NSPlayer/PSP-InternetRadioPlayer/Videos\n            /(clementine|music player daemon)\\s((\\d+)[\\w\\.-]+)/i,               // Clementine/MPD\n            /(lg player|nexplayer)\\s((\\d+)[\\d\\.]+)/i,\n            /player\\/(nexplayer|lg player)\\s((\\d+)[\\w\\.-]+)/i                   // NexPlayer/LG Player\n            ], [NAME, VERSION], [\n            /(nexplayer)\\s((\\d+)[\\w\\.-]+)/i                                     // Nexplayer\n            ], [NAME, VERSION], [\n             /(flrp)\\/((\\d+)[\\w\\.-]+)/i                                          // Flip Player\n            ], [[NAME, 'Flip Player'], VERSION], [\n             /(fstream|nativehost|queryseekspider|ia-archiver|facebookexternalhit)/i\n                                                                                // FStream/NativeHost/QuerySeekSpider/IA Archiver/facebookexternalhit\n            ], [NAME], [\n             /(gstreamer) souphttpsrc (?:\\([^\\)]+\\)){0,1} libsoup\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // Gstreamer\n            ], [NAME, VERSION], [\n             /(htc streaming player)\\s[\\w_]+\\s\\/\\s((\\d+)[\\d\\.]+)/i,              // HTC Streaming Player\n            /(java|python-urllib|python-requests|wget|libcurl)\\/((\\d+)[\\w\\.-_]+)/i,\n                                                                                // Java/urllib/requests/wget/cURL\n            /(lavf)((\\d+)[\\d\\.]+)/i                                             // Lavf (FFMPEG)\n            ], [NAME, VERSION], [\n             /(htc_one_s)\\/((\\d+)[\\d\\.]+)/i                                      // HTC One S\n            ], [[NAME, /_/g, ' '], VERSION], [\n             /(mplayer)(?:\\s|\\/)(?:(?:sherpya-){0,1}svn)(?:-|\\s)(r\\d+(?:-\\d+[\\w\\.-]+){0,1})/i\n                                                                                // MPlayer SVN\n            ], [NAME, VERSION], [\n             /(mplayer)(?:\\s|\\/|[unkow-]+)((\\d+)[\\w\\.-]+)/i                      // MPlayer\n            ], [NAME, VERSION], [\n             /(mplayer)/i,                                                       // MPlayer (no other info)\n            /(yourmuze)/i,                                                      // YourMuze\n            /(media player classic|nero showtime)/i                             // Media Player Classic/Nero ShowTime\n            ], [NAME], [\n             /(nero (?:home|scout))\\/((\\d+)[\\w\\.-]+)/i                           // Nero Home/Nero Scout\n            ], [NAME, VERSION], [\n             /(nokia\\d+)\\/((\\d+)[\\w\\.-]+)/i                                      // Nokia\n            ], [NAME, VERSION], [\n             /\\s(songbird)\\/((\\d+)[\\w\\.-]+)/i                                    // Songbird/Philips-Songbird\n            ], [NAME, VERSION], [\n             /(winamp)3 version ((\\d+)[\\w\\.-]+)/i,                               // Winamp\n            /(winamp)\\s((\\d+)[\\w\\.-]+)/i,\n            /(winamp)mpeg\\/((\\d+)[\\w\\.-]+)/i\n            ], [NAME, VERSION], [\n             /(ocms-bot|tapinradio|tunein radio|unknown|winamp|inlight radio)/i  // OCMS-bot/tap in radio/tunein/unknown/winamp (no other info)\n                                                                                // inlight radio\n            ], [NAME], [\n             /(quicktime|rma|radioapp|radioclientapplication|soundtap|totem|stagefright|streamium)\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // QuickTime/RealMedia/RadioApp/RadioClientApplication/\n                                                                                // SoundTap/Totem/Stagefright/Streamium\n            ], [NAME, VERSION], [\n             /(smp)((\\d+)[\\d\\.]+)/i                                              // SMP\n            ], [NAME, VERSION], [\n             /(vlc) media player - version ((\\d+)[\\w\\.]+)/i,                     // VLC Videolan\n            /(vlc)\\/((\\d+)[\\w\\.-]+)/i,\n            /(xbmc|gvfs|xine|xmms|irapp)\\/((\\d+)[\\w\\.-]+)/i,                    // XBMC/gvfs/Xine/XMMS/irapp\n            /(foobar2000)\\/((\\d+)[\\d\\.]+)/i,                                    // Foobar2000\n            /(itunes)\\/((\\d+)[\\d\\.]+)/i                                         // iTunes\n            ], [NAME, VERSION], [\n             /(wmplayer)\\/((\\d+)[\\w\\.-]+)/i,                                     // Windows Media Player\n            /(windows-media-player)\\/((\\d+)[\\w\\.-]+)/i\n            ], [[NAME, /-/g, ' '], VERSION], [\n             /windows\\/((\\d+)[\\w\\.-]+) upnp\\/[\\d\\.]+ dlnadoc\\/[\\d\\.]+ (home media server)/i\n                                                                                // Windows Media Server\n            ], [VERSION, [NAME, 'Windows']], [\n             /(com\\.riseupradioalarm)\\/((\\d+)[\\d\\.]*)/i                          // RiseUP Radio Alarm\n            ], [NAME, VERSION], [\n             /(rad.io)\\s((\\d+)[\\d\\.]+)/i,                                        // Rad.io\n            /(radio.(?:de|at|fr))\\s((\\d+)[\\d\\.]+)/i\n            ], [[NAME, 'rad.io'], VERSION]\n             //////////////////////\n            // Media players END\n            ////////////////////*/\n\n            ],\n\n            cpu: [[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\\)]/i // AMD64\n            ], [[ARCHITECTURE, 'amd64']], [/(ia32(?=;))/i // IA32 (quicktime)\n            ], [[ARCHITECTURE, util.lowerize]], [/((?:i[346]|x)86)[;\\)]/i // IA32\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows\\s(ce|mobile);\\sppc;/i], [[ARCHITECTURE, 'arm']], [/((?:ppc|powerpc)(?:64)?)(?:\\smac|;|\\))/i // PowerPC\n            ], [[ARCHITECTURE, /ower/, '', util.lowerize]], [/(sun4\\w)[;\\)]/i // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [/((?:avr32|ia64(?=;))|68k(?=\\))|arm(?:64|(?=v\\d+[;l]))|(?=atmel\\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i\n            // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, util.lowerize]]],\n\n            device: [[/\\((ipad|playbook);[\\w\\s\\);-]+(rim|apple)/i // iPad/PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [/applecoremedia\\/[\\w\\.]+ \\((ipad)/ // iPad\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [/(apple\\s{0,1}tv)/i // Apple TV\n            ], [[MODEL, 'Apple TV'], [VENDOR, 'Apple']], [/(archos)\\s(gamepad2?)/i, // Archos\n            /(hp).+(touchpad)/i, // HP TouchPad\n            /(hp).+(tablet)/i, // HP Tablet\n            /(kindle)\\/([\\w\\.]+)/i, // Kindle\n            /\\s(nook)[\\w\\s]+build\\/(\\w+)/i, // Nook\n            /(dell)\\s(strea[kpr\\s\\d]*[\\dko])/i // Dell Streak\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [/(kf[A-z]+)\\sbuild\\/.+silk\\//i // Kindle Fire HD\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [/(sd|kf)[0349hijorstuw]+\\sbuild\\/.+silk\\//i // Fire Phone\n            ], [[MODEL, mapper.str, maps.device.amazon.model], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [/android.+aft([bms])\\sbuild/i // Fire TV\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, SMARTTV]], [/\\((ip[honed|\\s\\w*]+);.+(apple)/i // iPod/iPhone\n            ], [MODEL, VENDOR, [TYPE, MOBILE]], [/\\((ip[honed|\\s\\w*]+);/i // iPod/iPhone\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [/(blackberry)[\\s-]?(\\w+)/i, // BlackBerry\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\\s_-]?([\\w-]*)/i,\n            // BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n            /(hp)\\s([\\w\\s]+\\w)/i, // HP iPAQ\n            /(asus)-?(\\w+)/i // Asus\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [/\\(bb10;\\s(\\w+)/i // BlackBerry 10\n            ], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [\n            // Asus Tablets\n            /android.+(transfo[prime\\s]{4,10}\\s\\w+|eeepc|slider\\s\\w+|nexus 7|padfone)/i], [MODEL, [VENDOR, 'Asus'], [TYPE, TABLET]], [/(sony)\\s(tablet\\s[ps])\\sbuild\\//i, // Sony\n            /(sony)?(?:sgp.+)\\sbuild\\//i], [[VENDOR, 'Sony'], [MODEL, 'Xperia Tablet'], [TYPE, TABLET]], [/android.+\\s([c-g]\\d{4}|so[-l]\\w+)\\sbuild\\//i], [MODEL, [VENDOR, 'Sony'], [TYPE, MOBILE]], [/\\s(ouya)\\s/i, // Ouya\n            /(nintendo)\\s([wids3u]+)/i // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [/android.+;\\s(shield)\\sbuild/i // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [/(playstation\\s[34portablevi]+)/i // Playstation\n            ], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [/(sprint\\s(\\w+))/i // Sprint Phones\n            ], [[VENDOR, mapper.str, maps.device.sprint.vendor], [MODEL, mapper.str, maps.device.sprint.model], [TYPE, MOBILE]], [/(lenovo)\\s?(S(?:5000|6000)+(?:[-][\\w+]))/i // Lenovo tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [/(htc)[;_\\s-]+([\\w\\s]+(?=\\))|\\w+)*/i, // HTC\n            /(zte)-(\\w*)/i, // ZTE\n            /(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\\s)sony)[_\\s-]?([\\w-]*)/i\n            // Alcatel/GeeksPhone/Lenovo/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [/(nexus\\s9)/i // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [/d\\/huawei([\\w\\s-]+)[;\\)]/i, /(nexus\\s6p)/i // Huawei\n            ], [MODEL, [VENDOR, 'Huawei'], [TYPE, MOBILE]], [/(microsoft);\\s(lumia[\\s\\w]+)/i // Microsoft Lumia\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [/[\\s\\(;](xbox(?:\\sone)?)[\\s\\);]/i // Microsoft Xbox\n            ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [/(kin\\.[onetw]{3})/i // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\s(milestone|droid(?:[2-4x]|\\s(?:bionic|x2|pro|razr))?:?(\\s4g)?)[\\w\\s]+build\\//i, /mot[\\s-]?(\\w*)/i, /(XT\\d{3,4}) build\\//i, /(nexus\\s6)/i], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [/android.+\\s(mz60\\d|xoom[\\s2]{0,2})\\sbuild\\//i], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [/hbbtv\\/\\d+\\.\\d+\\.\\d+\\s+\\([\\w\\s]*;\\s*(\\w[^;]*);([^;]*)/i // HbbTV devices\n            ], [[VENDOR, util.trim], [MODEL, util.trim], [TYPE, SMARTTV]], [/hbbtv.+maple;(\\d+)/i], [[MODEL, /^/, 'SmartTV'], [VENDOR, 'Samsung'], [TYPE, SMARTTV]], [/\\(dtv[\\);].+(aquos)/i // Sharp\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [/android.+((sch-i[89]0\\d|shw-m380s|gt-p\\d{4}|gt-n\\d+|sgh-t8[56]9|nexus 10))/i, /((SM-T\\w+))/i], [[VENDOR, 'Samsung'], MODEL, [TYPE, TABLET]], [// Samsung\n            /smart-tv.+(samsung)/i], [VENDOR, [TYPE, SMARTTV], MODEL], [/((s[cgp]h-\\w+|gt-\\w+|galaxy\\snexus|sm-\\w[\\w\\d]+))/i, /(sam[sung]*)[\\s-]*(\\w+-?[\\w-]*)/i, /sec-((sgh\\w+))/i], [[VENDOR, 'Samsung'], MODEL, [TYPE, MOBILE]], [/sie-(\\w*)/i // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [/(maemo|nokia).*(n900|lumia\\s\\d+)/i, // Nokia\n            /(nokia)[\\s_-]?([\\w-]*)/i], [[VENDOR, 'Nokia'], MODEL, [TYPE, MOBILE]], [/android\\s3\\.[\\s\\w;-]{10}(a\\d{3})/i // Acer\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [/android.+([vl]k\\-?\\d{3})\\s+build/i // LG Tablet\n            ], [MODEL, [VENDOR, 'LG'], [TYPE, TABLET]], [/android\\s3\\.[\\s\\w;-]{10}(lg?)-([06cv9]{3,4})/i // LG Tablet\n            ], [[VENDOR, 'LG'], MODEL, [TYPE, TABLET]], [/(lg) netcast\\.tv/i // LG SmartTV\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [/(nexus\\s[45])/i, // LG\n            /lg[e;\\s\\/-]+(\\w*)/i, /android.+lg(\\-?[\\d\\w]+)\\s+build/i], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [/android.+(ideatab[a-z0-9\\-\\s]+)/i // Lenovo\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [/linux;.+((jolla));/i // Jolla\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [/((pebble))app\\/[\\d\\.]+\\s/i // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [/android.+;\\s(oppo)\\s?([\\w\\s]+)\\sbuild/i // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [/crkey/i // Google Chromecast\n            ], [[MODEL, 'Chromecast'], [VENDOR, 'Google']], [/android.+;\\s(glass)\\s\\d/i // Google Glass\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [/android.+;\\s(pixel c)[\\s)]/i // Google Pixel C\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, TABLET]], [/android.+;\\s(pixel( [23])?( xl)?)\\s/i // Google Pixel\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, MOBILE]], [/android.+;\\s(\\w+)\\s+build\\/hm\\1/i, // Xiaomi Hongmi 'numeric' models\n            /android.+(hm[\\s\\-_]*note?[\\s_]*(?:\\d\\w)?)\\s+build/i, // Xiaomi Hongmi\n            /android.+(mi[\\s\\-_]*(?:one|one[\\s_]plus|note lte)?[\\s_]*(?:\\d?\\w?)[\\s_]*(?:plus)?)\\s+build/i, // Xiaomi Mi\n            /android.+(redmi[\\s\\-_]*(?:note)?(?:[\\s_]*[\\w\\s]+))\\s+build/i // Redmi Phones\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [/android.+(mi[\\s\\-_]*(?:pad)(?:[\\s_]*[\\w\\s]+))\\s+build/i // Mi Pad tablets\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, TABLET]], [/android.+;\\s(m[1-5]\\snote)\\sbuild/i // Meizu Tablet\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, TABLET]], [/(mz)-([\\w-]{2,})/i // Meizu Phone\n            ], [[VENDOR, 'Meizu'], MODEL, [TYPE, MOBILE]], [/android.+a000(1)\\s+build/i, // OnePlus\n            /android.+oneplus\\s(a\\d{4})\\s+build/i], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [/android.+[;\\/]\\s*(RCT[\\d\\w]+)\\s+build/i // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [/android.+[;\\/\\s]+(Venue[\\d\\s]{2,7})\\s+build/i // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [/android.+[;\\/]\\s*(Q[T|M][\\d\\w]+)\\s+build/i // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [/android.+[;\\/]\\s+(Barnes[&\\s]+Noble\\s+|BN[RT])(V?.*)\\s+build/i // Barnes & Noble Tablet\n            ], [[VENDOR, 'Barnes & Noble'], MODEL, [TYPE, TABLET]], [/android.+[;\\/]\\s+(TM\\d{3}.*\\b)\\s+build/i // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [/android.+;\\s(k88)\\sbuild/i // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [/android.+[;\\/]\\s*(gen\\d{3})\\s+build.*49h/i // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [/android.+[;\\/]\\s*(zur\\d{3})\\s+build/i // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [/android.+[;\\/]\\s*((Zeki)?TB.*\\b)\\s+build/i // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [/(android).+[;\\/]\\s+([YR]\\d{2})\\s+build/i, /android.+[;\\/]\\s+(Dragon[\\-\\s]+Touch\\s+|DT)(\\w{5})\\sbuild/i // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [/android.+[;\\/]\\s*(NS-?\\w{0,9})\\sbuild/i // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [/android.+[;\\/]\\s*((NX|Next)-?\\w{0,9})\\s+build/i // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [/android.+[;\\/]\\s*(Xtreme\\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\\s+build/i], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [// Voice Xtreme Phones\n\n            /android.+[;\\/]\\s*(LVTEL\\-)?(V1[12])\\s+build/i // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [/android.+;\\s(PH-1)\\s/i], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [// Essential PH-1\n\n            /android.+[;\\/]\\s*(V(100MD|700NA|7011|917G).*\\b)\\s+build/i // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [/android.+[;\\/]\\s*(Le[\\s\\-]+Pan)[\\s\\-]+(\\w{1,9})\\s+build/i // Le Pan Tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [/android.+[;\\/]\\s*(Trio[\\s\\-]*.*)\\s+build/i // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [/android.+[;\\/]\\s*(Trinity)[\\-\\s]*(T\\d{3})\\s+build/i // Trinity Tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [/android.+[;\\/]\\s*TU_(1491)\\s+build/i // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [/android.+(KS(.+))\\s+build/i // Amazon Kindle Tablets\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [/android.+(Gigaset)[\\s\\-]+(Q\\w{1,9})\\s+build/i // Gigaset Tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [/\\s(tablet|tab)[;\\/]/i, // Unidentifiable Tablet\n            /\\s(mobile)(?:[;\\/]|\\ssafari)/i // Unidentifiable Mobile\n            ], [[TYPE, util.lowerize], VENDOR, MODEL], [/(android[\\w\\.\\s\\-]{0,9});.+build/i // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n\n            /*//////////////////////////\n                // TODO: move to string map\n                ////////////////////////////\n                 /(C6603)/i                                                          // Sony Xperia Z C6603\n                ], [[MODEL, 'Xperia Z C6603'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n                /(C6903)/i                                                          // Sony Xperia Z 1\n                ], [[MODEL, 'Xperia Z 1'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n                 /(SM-G900[F|H])/i                                                   // Samsung Galaxy S5\n                ], [[MODEL, 'Galaxy S5'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n                /(SM-G7102)/i                                                       // Samsung Galaxy Grand 2\n                ], [[MODEL, 'Galaxy Grand 2'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n                /(SM-G530H)/i                                                       // Samsung Galaxy Grand Prime\n                ], [[MODEL, 'Galaxy Grand Prime'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n                /(SM-G313HZ)/i                                                      // Samsung Galaxy V\n                ], [[MODEL, 'Galaxy V'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n                /(SM-T805)/i                                                        // Samsung Galaxy Tab S 10.5\n                ], [[MODEL, 'Galaxy Tab S 10.5'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n                /(SM-G800F)/i                                                       // Samsung Galaxy S5 Mini\n                ], [[MODEL, 'Galaxy S5 Mini'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n                /(SM-T311)/i                                                        // Samsung Galaxy Tab 3 8.0\n                ], [[MODEL, 'Galaxy Tab 3 8.0'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n                 /(T3C)/i                                                            // Advan Vandroid T3C\n                ], [MODEL, [VENDOR, 'Advan'], [TYPE, TABLET]], [\n                /(ADVAN T1J\\+)/i                                                    // Advan Vandroid T1J+\n                ], [[MODEL, 'Vandroid T1J+'], [VENDOR, 'Advan'], [TYPE, TABLET]], [\n                /(ADVAN S4A)/i                                                      // Advan Vandroid S4A\n                ], [[MODEL, 'Vandroid S4A'], [VENDOR, 'Advan'], [TYPE, MOBILE]], [\n                 /(V972M)/i                                                          // ZTE V972M\n                ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n                 /(i-mobile)\\s(IQ\\s[\\d\\.]+)/i                                        // i-mobile IQ\n                ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n                /(IQ6.3)/i                                                          // i-mobile IQ IQ 6.3\n                ], [[MODEL, 'IQ 6.3'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n                /(i-mobile)\\s(i-style\\s[\\d\\.]+)/i                                   // i-mobile i-STYLE\n                ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n                /(i-STYLE2.1)/i                                                     // i-mobile i-STYLE 2.1\n                ], [[MODEL, 'i-STYLE 2.1'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n                 /(mobiistar touch LAI 512)/i                                        // mobiistar touch LAI 512\n                ], [[MODEL, 'Touch LAI 512'], [VENDOR, 'mobiistar'], [TYPE, MOBILE]], [\n                 /////////////\n                // END TODO\n                ///////////*/\n\n            ],\n\n            engine: [[/windows.+\\sedge\\/([\\w\\.]+)/i // EdgeHTML\n            ], [VERSION, [NAME, 'EdgeHTML']], [/(presto)\\/([\\w\\.]+)/i, // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m\n            /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i, // KHTML/Tasman/Links\n            /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i // iCab\n            ], [NAME, VERSION], [/rv\\:([\\w\\.]{1,9}).+(gecko)/i // Gecko\n            ], [VERSION, NAME]],\n\n            os: [[\n\n            // Windows based\n            /microsoft\\s(windows)\\s(vista|xp)/i // Windows (iTunes)\n            ], [NAME, VERSION], [/(windows)\\snt\\s6\\.2;\\s(arm)/i, // Windows RT\n            /(windows\\sphone(?:\\sos)*)[\\s\\/]?([\\d\\.\\s\\w]*)/i, // Windows Phone\n            /(windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)/i], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [/(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [\n\n            // Mobile/Embedded OS\n            /\\((bb)(10);/i // BlackBerry 10\n            ], [[NAME, 'BlackBerry'], VERSION], [/(blackberry)\\w*\\/?([\\w\\.]*)/i, // Blackberry\n            /(tizen)[\\/\\s]([\\w\\.]+)/i, // Tizen\n            /(android|webos|palm\\sos|qnx|bada|rim\\stablet\\sos|meego|contiki)[\\/\\s-]?([\\w\\.]*)/i,\n            // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo/Contiki\n            /linux;.+(sailfish);/i // Sailfish OS\n            ], [NAME, VERSION], [/(symbian\\s?os|symbos|s60(?=;))[\\/\\s-]?([\\w\\.]*)/i // Symbian\n            ], [[NAME, 'Symbian'], VERSION], [/\\((series40);/i // Series 40\n            ], [NAME], [/mozilla.+\\(mobile;.+gecko.+firefox/i // Firefox OS\n            ], [[NAME, 'Firefox OS'], VERSION], [\n\n            // Console\n            /(nintendo|playstation)\\s([wids34portablevu]+)/i, // Nintendo/Playstation\n\n            // GNU/Linux based\n            /(mint)[\\/\\s\\(]?(\\w*)/i, // Mint\n            /(mageia|vectorlinux)[;\\s]/i, // Mageia/VectorLinux\n            /(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\\/\\s-]?(?!chrom)([\\w\\.-]*)/i,\n            // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware\n            // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus\n            /(hurd|linux)\\s?([\\w\\.]*)/i, // Hurd/Linux\n            /(gnu)\\s?([\\w\\.]*)/i // GNU\n            ], [NAME, VERSION], [/(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i // Chromium OS\n            ], [[NAME, 'Chromium OS'], VERSION], [\n\n            // Solaris\n            /(sunos)\\s?([\\w\\.\\d]*)/i // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n\n            // BSD based\n            /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?([\\w\\.]*)/i // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly\n            ], [NAME, VERSION], [/(haiku)\\s(\\w+)/i // Haiku\n            ], [NAME, VERSION], [/cfnetwork\\/.+darwin/i, /ip[honead]{2,4}(?:.*os\\s([\\w]+)\\slike\\smac|;\\sopera)/i // iOS\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [/(mac\\sos\\sx)\\s?([\\w\\s\\.]*)/i, /(macintosh|mac(?=_powerpc)\\s)/i // Mac OS\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\n\n            // Other\n            /((?:open)?solaris)[\\/\\s-]?([\\w\\.]*)/i, // Solaris\n            /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.])*/i, // AIX\n            /(plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos|openvms|fuchsia)/i,\n            // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS/OpenVMS/Fuchsia\n            /(unix)\\s?([\\w\\.]*)/i // UNIX\n            ], [NAME, VERSION]]\n        };\n\n        /////////////////\n        // Constructor\n        ////////////////\n        /*\n        var Browser = function (name, version) {\n            this[NAME] = name;\n            this[VERSION] = version;\n        };\n        var CPU = function (arch) {\n            this[ARCHITECTURE] = arch;\n        };\n        var Device = function (vendor, model, type) {\n            this[VENDOR] = vendor;\n            this[MODEL] = model;\n            this[TYPE] = type;\n        };\n        var Engine = Browser;\n        var OS = Browser;\n        */\n        var UAParser = function UAParser(uastring, extensions) {\n\n            if ((typeof uastring === 'undefined' ? 'undefined' : _typeof(uastring)) === 'object') {\n                extensions = uastring;\n                uastring = undefined;\n            }\n\n            if (!(this instanceof UAParser)) {\n                return new UAParser(uastring, extensions).getResult();\n            }\n\n            var ua = uastring || (window && window.navigator && window.navigator.userAgent ? window.navigator.userAgent : EMPTY);\n            var rgxmap = extensions ? util.extend(regexes, extensions) : regexes;\n            //var browser = new Browser();\n            //var cpu = new CPU();\n            //var device = new Device();\n            //var engine = new Engine();\n            //var os = new OS();\n\n            this.getBrowser = function () {\n                var browser = { name: undefined, version: undefined };\n                mapper.rgx.call(browser, ua, rgxmap.browser);\n                browser.major = util.major(browser.version); // deprecated\n                return browser;\n            };\n            this.getCPU = function () {\n                var cpu = { architecture: undefined };\n                mapper.rgx.call(cpu, ua, rgxmap.cpu);\n                return cpu;\n            };\n            this.getDevice = function () {\n                var device = { vendor: undefined, model: undefined, type: undefined };\n                mapper.rgx.call(device, ua, rgxmap.device);\n                return device;\n            };\n            this.getEngine = function () {\n                var engine = { name: undefined, version: undefined };\n                mapper.rgx.call(engine, ua, rgxmap.engine);\n                return engine;\n            };\n            this.getOS = function () {\n                var os = { name: undefined, version: undefined };\n                mapper.rgx.call(os, ua, rgxmap.os);\n                return os;\n            };\n            this.getResult = function () {\n                return {\n                    ua: this.getUA(),\n                    browser: this.getBrowser(),\n                    engine: this.getEngine(),\n                    os: this.getOS(),\n                    device: this.getDevice(),\n                    cpu: this.getCPU()\n                };\n            };\n            this.getUA = function () {\n                return ua;\n            };\n            this.setUA = function (uastring) {\n                ua = uastring;\n                //browser = new Browser();\n                //cpu = new CPU();\n                //device = new Device();\n                //engine = new Engine();\n                //os = new OS();\n                return this;\n            };\n            return this;\n        };\n\n        UAParser.VERSION = LIBVERSION;\n        UAParser.BROWSER = {\n            NAME: NAME,\n            MAJOR: MAJOR, // deprecated\n            VERSION: VERSION\n        };\n        UAParser.CPU = {\n            ARCHITECTURE: ARCHITECTURE\n        };\n        UAParser.DEVICE = {\n            MODEL: MODEL,\n            VENDOR: VENDOR,\n            TYPE: TYPE,\n            CONSOLE: CONSOLE,\n            MOBILE: MOBILE,\n            SMARTTV: SMARTTV,\n            TABLET: TABLET,\n            WEARABLE: WEARABLE,\n            EMBEDDED: EMBEDDED\n        };\n        UAParser.ENGINE = {\n            NAME: NAME,\n            VERSION: VERSION\n        };\n        UAParser.OS = {\n            NAME: NAME,\n            VERSION: VERSION\n        };\n        //UAParser.Utils = util;\n\n        ///////////\n        // Export\n        //////////\n\n\n        // check js environment\n        if ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) !== UNDEF_TYPE) {\n            // nodejs env\n            if ((typeof module === 'undefined' ? 'undefined' : _typeof(module)) !== UNDEF_TYPE && module.exports) {\n                exports = module.exports = UAParser;\n            }\n            // TODO: test!!!!!!!!\n            /*\n            if (require && require.main === module && process) {\n                // cli\n                var jsonize = function (arr) {\n                    var res = [];\n                    for (var i in arr) {\n                        res.push(new UAParser(arr[i]).getResult());\n                    }\n                    process.stdout.write(JSON.stringify(res, null, 2) + '\\n');\n                };\n                if (process.stdin.isTTY) {\n                    // via args\n                    jsonize(process.argv.slice(2));\n                } else {\n                    // via pipe\n                    var str = '';\n                    process.stdin.on('readable', function() {\n                        var read = process.stdin.read();\n                        if (read !== null) {\n                            str += read;\n                        }\n                    });\n                    process.stdin.on('end', function () {\n                        jsonize(str.replace(/\\n$/, '').split('\\n'));\n                    });\n                }\n            }\n            */\n            exports.UAParser = UAParser;\n        } else {\n            // requirejs env (optional)\n            if ((typeof define === 'undefined' ? 'undefined' : _typeof(define)) === FUNC_TYPE && define.amd) {\n                define(function () {\n                    return UAParser;\n                });\n            } else if (window) {\n                // browser env\n                window.UAParser = UAParser;\n            }\n        }\n\n        // jQuery/Zepto specific (optional)\n        // Note:\n        //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n        //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n        //   and we should catch that.\n        var $ = window && (window.jQuery || window.Zepto);\n        if ((typeof $ === 'undefined' ? 'undefined' : _typeof($)) !== UNDEF_TYPE && !$.ua) {\n            var parser = new UAParser();\n            $.ua = parser.getResult();\n            $.ua.get = function () {\n                return parser.getUA();\n            };\n            $.ua.set = function (uastring) {\n                parser.setUA(uastring);\n                var result = parser.getResult();\n                for (var prop in result) {\n                    $.ua[prop] = result[prop];\n                }\n            };\n        }\n    })((typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' ? window : this);\n    /**\n     * [js-sha256]{@link https://github.com/emn178/js-sha256}\n     *\n     * @version 0.3.2\n     * @author Chen, Yi-Cyuan [emn178@gmail.com]\n     * @copyright Chen, Yi-Cyuan 2014-2016\n     * @license MIT\n     */\n    (function (root) {\n        'use strict';\n\n        var NODE_JS = (typeof process === 'undefined' ? 'undefined' : _typeof(process)) == 'object' && process.versions && process.versions.node;\n        if (NODE_JS) {\n            root = global;\n        }\n        var COMMON_JS = !root.JS_SHA256_TEST && (typeof module === 'undefined' ? 'undefined' : _typeof(module)) == 'object' && module.exports;\n        var HEX_CHARS = '0123456789abcdef'.split('');\n        var EXTRA = [-2147483648, 8388608, 32768, 128];\n        var SHIFT = [24, 16, 8, 0];\n        var K = [0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5, 0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174, 0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da, 0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967, 0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85, 0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070, 0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3, 0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2];\n\n        var blocks = [];\n\n        var sha224 = function sha224(message) {\n            return sha256(message, true);\n        };\n\n        var sha256 = function sha256(message, is224) {\n            var notString = typeof message != 'string';\n            if (notString && message.constructor == root.ArrayBuffer) {\n                message = new Uint8Array(message);\n            }\n\n            var h0,\n                h1,\n                h2,\n                h3,\n                h4,\n                h5,\n                h6,\n                h7,\n                block,\n                code,\n                first = true,\n                end = false,\n                i,\n                j,\n                index = 0,\n                start = 0,\n                bytes = 0,\n                length = message.length,\n                s0,\n                s1,\n                maj,\n                t1,\n                t2,\n                ch,\n                ab,\n                da,\n                cd,\n                bc;\n\n            if (is224) {\n                h0 = 0xc1059ed8;\n                h1 = 0x367cd507;\n                h2 = 0x3070dd17;\n                h3 = 0xf70e5939;\n                h4 = 0xffc00b31;\n                h5 = 0x68581511;\n                h6 = 0x64f98fa7;\n                h7 = 0xbefa4fa4;\n            } else {\n                // 256\n                h0 = 0x6a09e667;\n                h1 = 0xbb67ae85;\n                h2 = 0x3c6ef372;\n                h3 = 0xa54ff53a;\n                h4 = 0x510e527f;\n                h5 = 0x9b05688c;\n                h6 = 0x1f83d9ab;\n                h7 = 0x5be0cd19;\n            }\n            block = 0;\n            do {\n                blocks[0] = block;\n                blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n                if (notString) {\n                    for (i = start; index < length && i < 64; ++index) {\n                        blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n                    }\n                } else {\n                    for (i = start; index < length && i < 64; ++index) {\n                        code = message.charCodeAt(index);\n                        if (code < 0x80) {\n                            blocks[i >> 2] |= code << SHIFT[i++ & 3];\n                        } else if (code < 0x800) {\n                            blocks[i >> 2] |= (0xc0 | code >> 6) << SHIFT[i++ & 3];\n                            blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                        } else if (code < 0xd800 || code >= 0xe000) {\n                            blocks[i >> 2] |= (0xe0 | code >> 12) << SHIFT[i++ & 3];\n                            blocks[i >> 2] |= (0x80 | code >> 6 & 0x3f) << SHIFT[i++ & 3];\n                            blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                        } else {\n                            code = 0x10000 + ((code & 0x3ff) << 10 | message.charCodeAt(++index) & 0x3ff);\n                            blocks[i >> 2] |= (0xf0 | code >> 18) << SHIFT[i++ & 3];\n                            blocks[i >> 2] |= (0x80 | code >> 12 & 0x3f) << SHIFT[i++ & 3];\n                            blocks[i >> 2] |= (0x80 | code >> 6 & 0x3f) << SHIFT[i++ & 3];\n                            blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                        }\n                    }\n                }\n                bytes += i - start;\n                start = i - 64;\n                if (index == length) {\n                    blocks[i >> 2] |= EXTRA[i & 3];\n                    ++index;\n                }\n                block = blocks[16];\n                if (index > length && i < 56) {\n                    blocks[15] = bytes << 3;\n                    end = true;\n                }\n\n                var a = h0,\n                    b = h1,\n                    c = h2,\n                    d = h3,\n                    e = h4,\n                    f = h5,\n                    g = h6,\n                    h = h7;\n                for (j = 16; j < 64; ++j) {\n                    // rightrotate\n                    t1 = blocks[j - 15];\n                    s0 = (t1 >>> 7 | t1 << 25) ^ (t1 >>> 18 | t1 << 14) ^ t1 >>> 3;\n                    t1 = blocks[j - 2];\n                    s1 = (t1 >>> 17 | t1 << 15) ^ (t1 >>> 19 | t1 << 13) ^ t1 >>> 10;\n                    blocks[j] = blocks[j - 16] + s0 + blocks[j - 7] + s1 << 0;\n                }\n\n                bc = b & c;\n                for (j = 0; j < 64; j += 4) {\n                    if (first) {\n                        if (is224) {\n                            ab = 300032;\n                            t1 = blocks[0] - 1413257819;\n                            h = t1 - 150054599 << 0;\n                            d = t1 + 24177077 << 0;\n                        } else {\n                            ab = 704751109;\n                            t1 = blocks[0] - 210244248;\n                            h = t1 - 1521486534 << 0;\n                            d = t1 + 143694565 << 0;\n                        }\n                        first = false;\n                    } else {\n                        s0 = (a >>> 2 | a << 30) ^ (a >>> 13 | a << 19) ^ (a >>> 22 | a << 10);\n                        s1 = (e >>> 6 | e << 26) ^ (e >>> 11 | e << 21) ^ (e >>> 25 | e << 7);\n                        ab = a & b;\n                        maj = ab ^ a & c ^ bc;\n                        ch = e & f ^ ~e & g;\n                        t1 = h + s1 + ch + K[j] + blocks[j];\n                        t2 = s0 + maj;\n                        h = d + t1 << 0;\n                        d = t1 + t2 << 0;\n                    }\n                    s0 = (d >>> 2 | d << 30) ^ (d >>> 13 | d << 19) ^ (d >>> 22 | d << 10);\n                    s1 = (h >>> 6 | h << 26) ^ (h >>> 11 | h << 21) ^ (h >>> 25 | h << 7);\n                    da = d & a;\n                    maj = da ^ d & b ^ ab;\n                    ch = h & e ^ ~h & f;\n                    t1 = g + s1 + ch + K[j + 1] + blocks[j + 1];\n                    t2 = s0 + maj;\n                    g = c + t1 << 0;\n                    c = t1 + t2 << 0;\n                    s0 = (c >>> 2 | c << 30) ^ (c >>> 13 | c << 19) ^ (c >>> 22 | c << 10);\n                    s1 = (g >>> 6 | g << 26) ^ (g >>> 11 | g << 21) ^ (g >>> 25 | g << 7);\n                    cd = c & d;\n                    maj = cd ^ c & a ^ da;\n                    ch = g & h ^ ~g & e;\n                    t1 = f + s1 + ch + K[j + 2] + blocks[j + 2];\n                    t2 = s0 + maj;\n                    f = b + t1 << 0;\n                    b = t1 + t2 << 0;\n                    s0 = (b >>> 2 | b << 30) ^ (b >>> 13 | b << 19) ^ (b >>> 22 | b << 10);\n                    s1 = (f >>> 6 | f << 26) ^ (f >>> 11 | f << 21) ^ (f >>> 25 | f << 7);\n                    bc = b & c;\n                    maj = bc ^ b & d ^ cd;\n                    ch = f & g ^ ~f & h;\n                    t1 = e + s1 + ch + K[j + 3] + blocks[j + 3];\n                    t2 = s0 + maj;\n                    e = a + t1 << 0;\n                    a = t1 + t2 << 0;\n                }\n\n                h0 = h0 + a << 0;\n                h1 = h1 + b << 0;\n                h2 = h2 + c << 0;\n                h3 = h3 + d << 0;\n                h4 = h4 + e << 0;\n                h5 = h5 + f << 0;\n                h6 = h6 + g << 0;\n                h7 = h7 + h << 0;\n            } while (!end);\n\n            var hex = HEX_CHARS[h0 >> 28 & 0x0F] + HEX_CHARS[h0 >> 24 & 0x0F] + HEX_CHARS[h0 >> 20 & 0x0F] + HEX_CHARS[h0 >> 16 & 0x0F] + HEX_CHARS[h0 >> 12 & 0x0F] + HEX_CHARS[h0 >> 8 & 0x0F] + HEX_CHARS[h0 >> 4 & 0x0F] + HEX_CHARS[h0 & 0x0F] + HEX_CHARS[h1 >> 28 & 0x0F] + HEX_CHARS[h1 >> 24 & 0x0F] + HEX_CHARS[h1 >> 20 & 0x0F] + HEX_CHARS[h1 >> 16 & 0x0F] + HEX_CHARS[h1 >> 12 & 0x0F] + HEX_CHARS[h1 >> 8 & 0x0F] + HEX_CHARS[h1 >> 4 & 0x0F] + HEX_CHARS[h1 & 0x0F] + HEX_CHARS[h2 >> 28 & 0x0F] + HEX_CHARS[h2 >> 24 & 0x0F] + HEX_CHARS[h2 >> 20 & 0x0F] + HEX_CHARS[h2 >> 16 & 0x0F] + HEX_CHARS[h2 >> 12 & 0x0F] + HEX_CHARS[h2 >> 8 & 0x0F] + HEX_CHARS[h2 >> 4 & 0x0F] + HEX_CHARS[h2 & 0x0F] + HEX_CHARS[h3 >> 28 & 0x0F] + HEX_CHARS[h3 >> 24 & 0x0F] + HEX_CHARS[h3 >> 20 & 0x0F] + HEX_CHARS[h3 >> 16 & 0x0F] + HEX_CHARS[h3 >> 12 & 0x0F] + HEX_CHARS[h3 >> 8 & 0x0F] + HEX_CHARS[h3 >> 4 & 0x0F] + HEX_CHARS[h3 & 0x0F] + HEX_CHARS[h4 >> 28 & 0x0F] + HEX_CHARS[h4 >> 24 & 0x0F] + HEX_CHARS[h4 >> 20 & 0x0F] + HEX_CHARS[h4 >> 16 & 0x0F] + HEX_CHARS[h4 >> 12 & 0x0F] + HEX_CHARS[h4 >> 8 & 0x0F] + HEX_CHARS[h4 >> 4 & 0x0F] + HEX_CHARS[h4 & 0x0F] + HEX_CHARS[h5 >> 28 & 0x0F] + HEX_CHARS[h5 >> 24 & 0x0F] + HEX_CHARS[h5 >> 20 & 0x0F] + HEX_CHARS[h5 >> 16 & 0x0F] + HEX_CHARS[h5 >> 12 & 0x0F] + HEX_CHARS[h5 >> 8 & 0x0F] + HEX_CHARS[h5 >> 4 & 0x0F] + HEX_CHARS[h5 & 0x0F] + HEX_CHARS[h6 >> 28 & 0x0F] + HEX_CHARS[h6 >> 24 & 0x0F] + HEX_CHARS[h6 >> 20 & 0x0F] + HEX_CHARS[h6 >> 16 & 0x0F] + HEX_CHARS[h6 >> 12 & 0x0F] + HEX_CHARS[h6 >> 8 & 0x0F] + HEX_CHARS[h6 >> 4 & 0x0F] + HEX_CHARS[h6 & 0x0F];\n            if (!is224) {\n                hex += HEX_CHARS[h7 >> 28 & 0x0F] + HEX_CHARS[h7 >> 24 & 0x0F] + HEX_CHARS[h7 >> 20 & 0x0F] + HEX_CHARS[h7 >> 16 & 0x0F] + HEX_CHARS[h7 >> 12 & 0x0F] + HEX_CHARS[h7 >> 8 & 0x0F] + HEX_CHARS[h7 >> 4 & 0x0F] + HEX_CHARS[h7 & 0x0F];\n            }\n            return hex;\n        };\n\n        if (COMMON_JS) {\n            sha256.sha256 = sha256;\n            sha256.sha224 = sha224;\n            module.exports = sha256;\n        } else if (root) {\n            root.sha256 = sha256;\n            root.sha224 = sha224;\n        }\n    })(this);\n\n    // here right after injection, libs are injected at window.\n    djatyLibs.forEach(function (lib) {\n        var name = lib.name;\n        Djaty.libs[name] = window[name];\n\n        // Now delete the added lib and if it was already at window restore it.\n        window[name] = oldLibs[name];\n    });\n\n    // If lib deals with this as if it was the window obj, \"this\" inside our closure\n    // is not the window (undefined because of 'use strict');\n}).call(window, Djaty, libs);\n//# sourceMappingURL=libWrapper.js.map\n\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/* eslint-disable max-lines */\n/**\n* An object to wrap our commonly used functions.\n*/\n\n/* global HTMLElement, Event */\nvar utils = Djaty.utils = Djaty.utils.assign(Djaty.utils, {\n  /**\n   * Search array of object for matching key values.\n   *\n   * @param  {Array} arr\n   * @param  {String} key\n   * @param  {String} value\n   * @return {Array}\n   */\n  find: function find(arr, key, value) {\n    // Error Handling\n    if (!Array.isArray(arr)) {\n      throw new Error('Make sure you pass \"find\" arr parameter as an aray');\n    }\n\n    return arr.filter(function (obj) {\n      return obj[key] === value ? obj : false;\n    });\n  },\n\n\n  /**\n    * Return an event handler where the scope refer to the current element\n    * Also pass to it the class instance it's working on\n    * Use this function for all event handlers inside classes.\n    *\n    * @param  {Object} instance of the current class\n    * @param  {Function} handler (Usually, a member method in the class)\n    *         This method should accept the class instance as a new parameter\n    * @return {Function} A function with a normal 'this' scope\n    */\n  getEventHandler: function getEventHandler(instance, handler) {\n    // Error Handling\n    if (!Djaty.utils.isInstanceOf('Object', instance)) {\n      throw new Error('Make sure you pass \"getEventHandler\" instance parameter as an object');\n    }\n\n    if (typeof handler !== 'function') {\n      throw new Error('Make sure you pass \"getEventHandler\" handler parameter as a function');\n    }\n\n    return function eventHandler(ev) {\n      handler.call(this, ev, instance);\n    };\n  },\n\n\n  /**\n   * Check if element is a DOM element and throw errors if not.\n   *\n   * @param  {String} label : Class name\n   * @param  {Object} selectorOrEl:\n   *         Accepts string selectorOrEl that match only one DOM element or accepts an object.\n   * @param  {String} tagName : DOM element with a certain tag name.\n   * @param  {HTMLElement} lookup : DOM element to limit the search scope.\n   * @return {HTMLElement}\n   */\n  getElementFromSelectorOrEl: function getElementFromSelectorOrEl(label, selectorOrEl) {\n    var tagName = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var lookup = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : document;\n\n    // Error Handling\n    if (typeof label !== 'string') {\n      throw new Error('Make sure you pass \"getElementFromSelectorOrEl\" label parameter as a string');\n    }\n\n    if (typeof selectorOrEl === 'string') {\n      var elements = lookup.querySelectorAll(selectorOrEl);\n      if (!elements.length) {\n        throw new Error(label + ' can\\'t find any DOM elements with passed selectorOrEl');\n      }\n\n      if (elements.length > 1) {\n        throw new Error(label + ' can\\'t accept more than one DOM element');\n      }\n\n      if (tagName && elements[0].tagName.toLowerCase() !== tagName.toLowerCase()) {\n        throw new Error(label + ' current selectorOrEl is not ' + tagName);\n      }\n\n      return elements[0];\n    }\n\n    if (utils.isDomElement(selectorOrEl)) {\n      if (tagName && selectorOrEl.tagName.toLowerCase() !== tagName.toLowerCase()) {\n        throw new Error(label + ' current selectorOrEl is not ' + tagName);\n      }\n      return selectorOrEl;\n    }\n\n    throw new Error(label + ' expects selectorOrEl parameter to be ' + 'either \"String\" or \"HTMLElement\"');\n  },\n\n\n  /* eslint-disable no-tabs */\n  /**\n   * Validate class options against an option structure object.\n   *\n   * Example for the option structure object:\n   *   const optStruct = {\n   *     option: {\n   *       // Required keys\n   *       type: 'string',\n   *\n   *       // Optional keys\n   *       allowedValues: ['foo', 'bar'],\n   *\n   *\t\t\t// Optional-conditional keys\n   *   \t\tchildType: 'selectorOrEl' (Valid only with option \"type: array\")\n   *\n   *       // Optional keys with default of true\n   *       required: false,\n   *     },\n   *   };\n   *\n   * @param  {String} label : Class name\n   * @param  {Object} optStruct : key/value opt structure\n   * @param  {Object} opt\n   * @return {void}\n   */\n  /* eslint-disable no-tabs */\n\n  assertValidOpts: function assertValidOpts(label, optStruct, opt) {\n    if (typeof label !== 'string') {\n      throw new Error('Make sure you pass \"assertValidOpts\" label parameter correctly');\n    }\n\n    if (!Djaty.utils.isInstanceOf('Object', optStruct)) {\n      throw new Error('Make sure you pass \"assertValidOpts\" optStruct parameter correctly');\n    }\n\n    if (!Djaty.utils.isInstanceOf('Object', opt)) {\n      throw new Error(label + ' expects opt parameter to be an object');\n    }\n\n    utils.forOwn(optStruct, function (attr, curStruct) {\n      var optAttr = opt[attr];\n      if (!optAttr) {\n        return;\n      }\n\n      var allowedValues = curStruct.allowedValues;\n      var required = curStruct.required === false ? curStruct.required : true;\n\n      if (required && typeof optAttr === 'undefined') {\n        throw new Error(label + ' expects opt parameter to have ' + attr + ' attribute');\n      }\n\n      // Check if object is an custom/plain object and not any built-in object\n      // like Arrays, Functions...\n      if (curStruct.type === 'object' && curStruct.properties && optAttr.toString() === '[object Object]') {\n        utils.assertValidOpts(label, curStruct.properties, optAttr);\n      }\n\n      // eslint-disable-next-line valid-typeof\n      if ((typeof optAttr === 'undefined' ? 'undefined' : _typeof(optAttr)) !== curStruct.type && curStruct.type !== 'array' && curStruct.type !== 'selectorOrEl' || curStruct.type === 'array' && !Array.isArray(optAttr)) {\n        throw new Error(label + ' expects opt ' + attr + ' to be ' + curStruct.type);\n      }\n\n      if (curStruct.type === 'selectorOrEl') {\n        if (!utils.isDomElement(optAttr) && typeof optAttr !== 'string') {\n          throw new Error(label + ' expects opt ' + attr + ' to be ' + curStruct.type);\n        }\n\n        if (typeof optAttr === 'string') {\n          var elements = document.querySelectorAll(optAttr);\n          if (!elements.length) {\n            throw new Error(label + ' expects opt ' + attr + ' to be ' + curStruct.type);\n          }\n        }\n      }\n\n      if (curStruct.type === 'array' && curStruct.childType) {\n        optAttr.forEach(function (child) {\n          var optChildsStruct = {};\n          optChildsStruct[attr + ' childs'] = { type: curStruct.childType };\n          var optChilds = {};\n          optChilds[attr + ' childs'] = child;\n          utils.assertValidOpts(label, optChildsStruct, optChilds);\n        });\n      }\n\n      if (allowedValues && allowedValues.indexOf(optAttr) < 0) {\n        // check if the value is allowed\n        throw new Error(label + ' expects ' + attr + ' value options to be one of ' + ('\"' + allowedValues.join(', ') + '\"'));\n      }\n    });\n  },\n\n\n  /**\n   * Check for adding optional properties or not depending on trackingOptions in config\n   *\n   * @param {String}  tracker\n   * @param {Object}  formattedObj\n   * @param {String}  propName\n   * @param {Object}  data\n   * @param {Object}  trackingOptions\n   * @return {boolean}\n   */\n  resolveProperty: function resolveProperty(tracker, formattedObj, propName, data, trackingOptions) {\n    if (trackingOptions[tracker][propName]) {\n      formattedObj[propName] = data;\n      return true;\n    }\n\n    return false;\n  },\n\n  /** ************************ Handling cross-browsers ********************** */\n  /**\n   * Handle cross-browsers horizontal mouse/touch position.\n   *\n   * @param   {Event} ev : The event handler obj\n   * @param   {String} axis : could be only 'x' or 'y'\n   * @return  {Number}\n   */\n  normalizedPointerPos: function normalizedPointerPos(ev, axis) {\n    // Error Handling\n    var ptr = /mousemove|mouseup|mousedown|touchstart|touchend|touchmove/;\n    if (!(Djaty.utils.isInstanceOf('Event', ev) && ptr.test(ev.type))) {\n      // Check if ev is an Event object\n      throw new Error('\"normalizedPointerPos\" expects ev parameter to be an Event object');\n    }\n\n    if (typeof axis !== 'string' || ['x', 'y'].indexOf(axis) < 0) {\n      throw new Error('\"normalizedPointerPos\" expects axis parameter to be \"x\" or \"y\"');\n    }\n\n    var axisUC = axis.toUpperCase();\n    var normalizedEvent = ev.touches ? ev.touches[0] : ev;\n\n    if (normalizedEvent['page' + axisUC]) {\n      return normalizedEvent['page' + axisUC];\n    }\n\n    if (normalizedEvent['client' + axisUC]) {\n      var scrollStr = 'scroll' + (axisUC === 'X' ? 'Left' : 'Top');\n      var docElScroll = document.documentElement[scrollStr];\n      var bodyElScroll = document.body[scrollStr];\n      var scrollVal = docElScroll || bodyElScroll;\n\n      return normalizedEvent['client' + axisUC] + scrollVal;\n    }\n\n    return -1;\n  },\n\n  /**\n   * AsyncLoop loop over array of functions and end of every function call next function of\n   * this array and last param last function you want call.\n   *\n   * Example:\n   *\n   * let f1 = (a, b, c, nextCb) => {\n   *    console.info('f1', a, b, c);\n   *    nextCb(++a, ++b, ++c);\n   *  }\n   * let f2 = (a, b, c, nextCb) => {\n   *    console.info('f2', a, b, c);\n   *    nextCb(++a, ++b, ++c);\n   *  }\n   *\n   * asyncLoop([f1, f2], [1, 2, 3], window, (a, b, c) => {\n   *   console.info('done', a, b, c)\n   * })\n   *\n   * Output:\n   * f1 1 2 3\n   * f2 2 3 4\n   * done 3 4 5\n   * @param {Array} funcArr\n   * @param {Array} initArgs\n   * @param {Object} ctx\n   * @param {Function} doneCb\n   */\n  asyncLoop: function asyncLoop(funcArr, initArgs, ctx, doneCb) {\n    var i = 0;\n    function next() {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      if (i === funcArr.length) {\n        doneCb.apply(ctx, args);\n        return;\n      }\n      var newArgs = args.concat(next);\n      // Note: we increase 'i' before calling the function in case\n      // In case the function called the callback synchronously\n      funcArr[i++].apply(ctx, newArgs);\n    }\n    next.apply(ctx, initArgs);\n  },\n\n  /**\n   * convert string to Array of object pairs of name:value\n   *\n   * @param {String} str string for splitting\n   * @param {String} splitter 'new line or ;'\n   * @param {String} op ' = or : '\n   * return {Object}\n   */\n  convertStrToPair: function convertStrToPair(str, splitter, op) {\n    if (typeof str !== 'string') {\n      return [];\n    }\n\n    var keyValueArray = [];\n    var strList = str.split(splitter);\n    for (var i = 0; i < strList.length; i++) {\n      var keyValue = strList[i].split(op);\n      if (keyValue.length < 2) {\n        continue;\n      }\n\n      keyValueArray.push({ name: keyValue[0], value: keyValue[1] });\n    }\n    return keyValueArray;\n  },\n\n  /**\n    * Savely append elements into Djaty DOM element.\n    *\n    * @param  {Object} selectorOrEl\n    * @return  {void}\n    */\n  appendIntoOrCreateDjaty: function appendIntoOrCreateDjaty(selectorOrEl) {\n    var element = this.getElementFromSelectorOrEl('utils.appendIntoDjaty()', selectorOrEl);\n    var djatyEl = document.body.querySelector('.djaty');\n\n    if (djatyEl) {\n      return djatyEl.appendChild(element);\n    }\n\n    djatyEl = document.createElement('div');\n    djatyEl.className = 'djaty';\n    djatyEl.classList.add('djaty-tool-hidden');\n    document.body.appendChild(djatyEl);\n\n    djatyEl.appendChild(element);\n    return element;\n  },\n  someObject: function someObject(object, cb) {\n    if (!Djaty.utils.isInstanceOf('Object', object)) {\n      throw new Error('Make sure you pass \"someObject\" obj parameter as an object');\n    }\n\n    if (typeof cb !== 'function') {\n      throw new Error('Make sure you pass \"someObject\" cb parameter as a function');\n    }\n\n    var has = Object.prototype.hasOwnProperty;\n    var obj = Object(object);\n\n    // eslint-disable-next-line no-restricted-syntax\n    for (var x in obj) {\n      if (!has.call(obj, x)) {\n        continue;\n      }\n\n      if (cb(x, obj[x])) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /**\n   * Create Ajax.\n   *\n   * @param {String} method\n   * @param {String} reqUrl\n   * @param {Object} data\n   * @param {Function} cb\n   * @returns\n   */\n  _ajax: function _ajax(method, reqUrl, data, cb) {\n    if (typeof cb !== 'function') {\n      cb = data;\n      data = undefined;\n    }\n    var xhr = new XMLHttpRequest();\n    xhr.open(method, reqUrl, true);\n    xhr.setRequestHeader('Content-Type', 'application/json');\n\n    // To work with credentials, CORS allow header must not be '*' it must be the original domain\n    // which is dynamic in our case and cannot be fixed.\n    // xhr.withCredentials = true;\n    xhr.onreadystatechange = function () {\n      // If request not complete or Initial OPTIONS CORS response received.\n      if (xhr.readyState !== 4 || xhr.status === 204) {\n        return;\n      }\n      var responseText = xhr.responseText;\n      responseText = responseText && responseText.replace(')]}\\',\\n', '');\n      var response = void 0;\n      // If errors, time out or if browser prevented the request for any reason\n      // (MixedContent for example).\n      try {\n        response = responseText ? JSON.parse(responseText) : {};\n      } catch (err) {\n        response = { response: responseText };\n      }\n\n      if (xhr.status >= 400 || xhr.status === 0) {\n        var err = {};\n        // Don't use new Error(response) as response could be an object\n        err.response = response;\n        err.status = xhr.status;\n        cb(err);\n        return;\n      }\n      cb(null, response);\n    };\n\n    if (data) {\n      xhr.send(data);\n      return;\n    }\n\n    xhr.send();\n  },\n\n\n  spinner: {\n    isSpin: false,\n    externalMethodHandler: {},\n    nodeListeners: [],\n    init: function init(externalMethodHandler) {\n      utils.spinner.externalMethodHandler = externalMethodHandler;\n    },\n    spin: function spin() {\n      var text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      var _this = this;\n\n      var actions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var block = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (actions && !Array.isArray(actions)) {\n        throw new Error('spin expects \"actions\" parameter to be Array');\n      }\n\n      utils.spinner.isSpin = true;\n      var body = document.body;\n      var djatyEl = body.querySelector('.djaty');\n      var spinner = body.querySelector('.spinner-backdrop');\n      if (!spinner) {\n        var spinnerEl = this._getSpinnerEl();\n        spinner = utils.appendIntoOrCreateDjaty(spinnerEl);\n      }\n      if (actions.length) {\n        spinner.classList.add('with-actions');\n      } else {\n        spinner.classList.remove('with-actions');\n      }\n      this.spinnerActions = spinner.querySelector('.actions');\n      this.spinnerText = spinner.querySelector('.text');\n\n      // Remove whole actions to remove all exist btns with their handlers.\n      // Helpful if user called spin twice without calling stopSpin();\n      this.spinnerActions.innerHTML = '';\n\n      actions.forEach(function (action) {\n        var btn = document.createElement('button');\n        btn.className = 'djaty-btn btn-submit ' + action.class;\n        btn.innerText = action.name;\n\n        if (action.info) {\n          var infoSpan = document.createElement('span');\n          infoSpan.className = 'info';\n          infoSpan.innerText = '?';\n          infoSpan.title = action.info;\n          btn.appendChild(infoSpan);\n        }\n\n        Djaty.utils.addEventListenerAndSaveIt([{ nodeListeners: Djaty.utils.spinner.nodeListeners,\n          node: btn,\n          eventName: 'click',\n          cb: action.handler }]);\n        _this.spinnerActions.appendChild(btn);\n      });\n\n      if (text) {\n        this.spinnerText.innerText = text + '...';\n      }\n\n      if (block) {\n        spinner.classList.add('block-spinner');\n      } else {\n        spinner.classList.remove('block-spinner');\n      }\n\n      this.spinnerActions.classList.add('show');\n      djatyEl.classList.add('spin');\n      utils.spinner.externalMethodHandler.callMethod('djatyExt.disableDjatyIcon', function () {\n        Djaty.logger.info('Disable djaty icon during spinning');\n      });\n    },\n\n\n    /**\n     * Show spinner.\n     *\n     * @return void\n     */\n    stopSpin: function stopSpin() {\n      var djatyEl = document.body.querySelector('.djaty');\n      Djaty.utils.spinner.nodeListeners.forEach(function (listen) {\n        Djaty.utils.originalRemoveEventListener.call(listen.node, listen.eventName, listen.cb);\n      });\n      Djaty.utils.spinner.nodeListeners = [];\n\n      if (!djatyEl.classList.contains('spin')) {\n        return;\n      }\n\n      utils.spinner.isSpin = false;\n\n      djatyEl.classList.remove('spin');\n      this.spinnerText.innerText = '';\n      this.spinnerActions.classList.remove('show');\n\n      // Remove whole actions to remove all exist buttons with their handlers.\n      this.spinnerActions.innerHTML = '';\n      utils.spinner.externalMethodHandler.callMethod('djatyExt.enableDjatyIcon', function () {\n        Djaty.logger.info('Enable djaty icon after spinning');\n      });\n    },\n    _getSpinnerEl: function _getSpinnerEl() {\n      var tpl = '\\n          <div class=\"spinner-content\">\\n            <div class=\"spinner\"></div>\\n            <div class=\"text\"></div>\\n            <div class=\"actions\">\\n            </div>\\n            <p class=\"djaty-marker-spin\">Djaty</p>\\n          </div>\\n      ';\n      var div = document.createElement('div');\n      div.className = 'spinner-backdrop';\n      div.innerHTML = tpl;\n      return div;\n    }\n  },\n\n  removeCircular: function removeCircular(data) {\n    var hasProp = Object.prototype.hasOwnProperty;\n\n    function throwsMessage(err) {\n      return '[Throws: .' + (err ? err.message : '?') + '.]';\n    }\n\n    function safeGetValueFromPropertyOnObject(obj, property) {\n      if (hasProp.call(obj, property)) {\n        try {\n          return obj[property];\n        } catch (err) {\n          Djaty.logger.error('Catch removeCircular bug', err);\n          return throwsMessage(err);\n        }\n      }\n\n      return obj[property];\n    }\n\n    var seen = []; // store references to objects we have seen before\n\n    function visit(obj) {\n      if (obj === null || (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object') {\n        return obj;\n      }\n\n      if (seen.indexOf(obj) !== -1) {\n        return '[Circular]';\n      }\n      seen.push(obj);\n      if (obj instanceof HTMLElement) {\n        return '[DOM ELEMENT]';\n      }\n\n      if (obj instanceof Error) {\n        return {\n          message: obj.message,\n          stack: obj.stack\n        };\n      }\n\n      if (typeof obj.toJSON === 'function') {\n        try {\n          return visit(obj.toJSON());\n        } catch (err) {\n          Djaty.logger.error('Catch removeCircular visit bug', err);\n          return throwsMessage(err);\n        }\n      }\n\n      if (Array.isArray(obj)) {\n        return obj.map(visit);\n      }\n\n      return Object.keys(obj).reduce(function (result, prop) {\n        // prevent faulty defined getter properties\n        result[prop] = visit(safeGetValueFromPropertyOnObject(obj, prop));\n        return result;\n      }, {});\n    }\n    return visit(data);\n  },\n  sizeOfObject: function sizeOfObject(object, limit) {\n    var objectList = [];\n    var result = {\n      size: 0,\n      uniqueStr: ''\n    };\n    var exceedLimit = false;\n    function recurse(value) {\n      if (limit && result.size >= limit) {\n        return -1;\n      }\n\n      try {\n        if (typeof value === 'boolean') {\n          result.size += 4;\n        } else if (typeof value === 'string') {\n          result.size += value.length * 2;\n        } else if (typeof value === 'number') {\n          result.size += 8;\n        } else if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && objectList.indexOf(value) === -1) {\n          objectList.push(value);\n          // eslint-disable-next-line guard-for-in, no-restricted-syntax\n          for (var i in value) {\n            if (exceedLimit) {\n              return result;\n            }\n\n            if (objectList.length === 1) {\n              result.uniqueStr += i + '_' + (typeof i === 'undefined' ? 'undefined' : _typeof(i)) + '_' + i.length + ';';\n            }\n\n            result.size += 8; // an assumed existence overhead\n            if (recurse(value[i]) === -1) {\n              exceedLimit = true;\n              result.size = -1;\n              return result;\n            }\n            // setTimeout(() => recurse(value[i]) === -1 && cb(-1));\n          }\n        }\n      } catch (err) {\n        Djaty.logger.info('@Djaty: Catch errors from unreadable properties from objects', err);\n        result.size = -1;\n      }\n\n      return result;\n    }\n\n    return recurse(object);\n  },\n  limitString: function limitString(title, limit) {\n    if (typeof title !== 'string') {\n      throw new Error('Title should be string');\n    }\n\n    return title.length > limit ? title.substring(0, limit) + '...' : title;\n  },\n  generateSelect2El: function generateSelect2El(selector, options) {\n    var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n    var select2El = Djaty.libs.$(selector).select2(options);\n    var isSelected = false;\n\n    data.forEach(function (item) {\n      var optionEl = Djaty.libs.$('<option></option>').attr('value', item.id).html(item.text);\n      if (item.selected) {\n        isSelected = true;\n        optionEl.attr('selected', item.selected);\n      }\n\n      select2El.append(optionEl);\n    });\n\n    select2El.data('select2').on('results:message', function onMsg() {\n      this.dropdown._positionDropdown();\n    });\n\n    select2El[0].disabled = false;\n\n    return Array.isArray(select2El.val()) || isSelected ? select2El : select2El.val(null).trigger('change');\n  }\n});\n//# sourceMappingURL=utils.js.map\n\n'use strict';\n\n/**\n * Browser Data\n *\n */\n// eslint-disable-next-line no-unused-vars\nvar browserData = {\n  /* ###################################################################### */\n  /* ########################### PUBLIC METHODS ########################### */\n  /* ###################################################################### */\n  /**\n   * Get browser storage data like localStorage, sessionStorage, cookies, ...\n   *\n   * @return void\n   */\n  getData: function getData() {\n    var data = {};\n    var dataStores = ['localStorage', 'sessionStorage'];\n\n    // get all data\n    dataStores.forEach(function (store) {\n      // Get cloned data to prevent editing the real data.\n      var storeData = window[store] ? window[store] : {};\n      data[store] = Djaty.utils.assign({}, storeData);\n    });\n\n    data.cookies = document.cookie;\n\n    // remove internal Djaty data\n    delete data.localStorage.DjatyTracking;\n\n    // Read IndexedDB data .. according to Basem, let it for now\n    // if (window.indexedDB) {\n    //   window.indexedDB.webkitGetDatabaseNames().addEventListener('success', ev => {\n    //     Djaty.utils.forOwn(ev.target.result, (key, dbName) => {\n    //       if (!isNaN(key)) {\n    //         console.log(dbName);\n    //       }\n    //     });\n    //   });\n    // }\n\n    return data;\n  }\n};\n//# sourceMappingURL=browserData.js.map\n\n'use strict';\n\n/**\n * Handling server availability if server offline delay after x**NumberOfRetry sec.\n *\n */\n// eslint-disable-next-line no-unused-vars\nvar buffer = {\n  bufferRequests: [],\n  numberOfRetry: 0,\n  isInitialized: false,\n  timeOutRef: null,\n  elementsPerRequest: 0,\n  bufferRequestLimit: 0,\n  serverDelayTime: 0,\n  offset: 0,\n  autoSubmittedErrorEndPoint: '',\n  projectId: undefined,\n  appendedData: {},\n  shouldBeDestroyed: false,\n\n  /* ###################################################################### */\n  /* ########################### PUBLIC METHODS ########################### */\n  /* ###################################################################### */\n  /**\n   * Initialize throttle module\n   *\n   * @params  {Object} data\n   * return {Object}\n   */\n  init: function init(data) {\n    this.isInitialized = true;\n    this.elementsPerRequest = Djaty.constants.elementsPerRequest;\n    this.bufferRequestLimit = Djaty.constants.bufferRequestLimit;\n    this.serverDelayTime = Djaty.constants.serverDelayTime;\n    this.appendedData = data;\n    return this;\n  },\n\n\n  /**\n   * Destroy buffer module\n   *\n   * Return void\n   */\n  destroy: function destroy() {\n    if (this.bufferRequests.length) {\n      this.shouldBeDestroyed = true;\n\n      return;\n    }\n\n    this.isInitialized = false;\n    clearTimeout(this.timeOutRef);\n    this.elementsPerRequest = 0;\n    this.serverDelayTime = 0;\n    this.autoSubmittedErrorEndPoint = '';\n    this.projectId = '';\n    this.appendedData = {};\n  },\n\n  /* ###################################################################### */\n  /* ########################### Private METHODS ########################## */\n  /* ###################################################################### */\n  /**\n   * Check if server is online or not in case not save requests and recall after delay.\n   *\n   * @param request\n   * @private\n   */\n  manageBuffer: function manageBuffer(request) {\n    if (typeof Djaty.config.apiKey !== 'string') {\n      throw new Error('apiKey required');\n    }\n\n    if (!this.isInitialized) {\n      throw new Error('You should initialize buffer module before using it.');\n    }\n\n    this.bufferRequests = this.bufferRequests.concat(request);\n    // If making requests and server still offline discard from beginning to don't exceed limit\n    if (this.bufferRequests.length > this.bufferRequestLimit) {\n      this.bufferRequests.shift();\n    }\n\n    if (this.timeOutRef) {\n      return;\n    }\n\n    var patch = this.appendedData;\n    patch.apiKey = Djaty.config.apiKey;\n    var bestLength = request.length;\n    if (request.length === 0) {\n      bestLength = this.bufferRequests.length > this.elementsPerRequest ? this.elementsPerRequest : this.bufferRequests.length;\n    }\n\n    patch.agentDataPatch = this.bufferRequests.slice(this.offset, this.offset + bestLength);\n    if (!this.timeOutRef) {\n      this.offset += bestLength;\n    }\n\n    if (!patch.agentDataPatch.length) {\n      this.offset = 0;\n\n      if (this.shouldBeDestroyed) {\n        this.shouldBeDestroyed = false;\n        this.destroy();\n      }\n\n      return;\n    }\n\n    this._submitRequest(Djaty.utils.assign({}, patch));\n  },\n\n  /**\n   * Connect to server and if it offline fire it again on the same requests.\n   *\n   * @private\n   */\n  _submitRequest: function _submitRequest(patch) {\n    var _this = this;\n\n    var strPatch = JSON.stringify(patch);\n    if (Djaty.config.trackingOptions.removeEmail) {\n      strPatch = strPatch.replace(/[0-9a-z._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}/gi, Djaty.constants.privacyPlaceHolder);\n    }\n\n    var url = Djaty.config.bugsURL + Djaty.config.api + Djaty.config.apiBugsUrl;\n\n    Djaty.utils.djatyAjax('POST', url, strPatch, function (err) {\n      // If server is offline delay 'delayTime' sec and increase 'numberOfRetry' and try again\n      if (err && (err.status >= 500 || err.status === 0)) {\n        buffer._serverError(function () {\n          _this._submitRequest(patch);\n        });\n\n        return;\n      }\n\n      _this.numberOfRetry = 0;\n      var IndexOfRequest = buffer.bufferRequests.indexOf(patch.agentDataPatch[0]);\n      buffer.bufferRequests.splice(IndexOfRequest, IndexOfRequest + patch.agentDataPatch.length);\n      _this.offset -= patch.agentDataPatch.length;\n\n      // Sending other patches after patch sending failure and connection returned\n      // resend failed patch then other stored patches\n      if (buffer.bufferRequests.length) {\n        buffer.manageBuffer([]);\n      }\n    });\n  },\n\n  /**\n   * Check if return Error retry.\n   *\n   * @private\n   */\n  _serverError: function _serverError(cb) {\n    var _this2 = this;\n\n    var delayTime = Math.pow(100, this.numberOfRetry);\n\n    // If time more than x min retry every x min.\n    if (delayTime > this.serverDelayTime) {\n      delayTime = this.serverDelayTime;\n    }\n\n    // If server still offline increase 'numberOfRetry' to increase delay time.\n    this.numberOfRetry++;\n    this.timeOutRef = Djaty.utils.djatySetTimeout(function () {\n      _this2.timeOutRef = undefined;\n      cb();\n    }, delayTime);\n  }\n};\n//# sourceMappingURL=buffer.js.map\n\n'use strict';\n\n/**\n * Throttling error requests\n * Managing incoming requests to send x request per y sec\n *\n */\n/* global  buffer */\n\n// eslint-disable-next-line no-unused-vars\nvar throttle = {\n  requests: [],\n  isInitialized: false,\n  timeoutRef: null,\n  elementsPerRequest: 0,\n  delayTimePerRequest: 0,\n  elementsForAllRequests: 0,\n  buffer: null,\n  shouldBeDestroyed: false,\n\n  /* ###################################################################### */\n  /* ########################### PUBLIC METHODS ########################### */\n  /* ###################################################################### */\n  /**\n   * Initialize throttle module\n   *\n   * @param  {Object} data\n   * return {Object}\n   */\n  init: function init(data) {\n    this.isInitialized = true;\n    this.elementsPerRequest = Djaty.constants.elementsPerRequest;\n    this.elementsForAllRequests = Djaty.constants.elementsForAllRequests;\n    this.delayTimePerRequest = Djaty.constants.delayTimePerRequest;\n    this.buffer = buffer.init(data);\n    return this;\n  },\n\n  /**\n   * This method manage requests to send x 'elementsPerRequest' to y second.\n   *\n   * @param {Array} request\n   * return void\n   */\n  ManageThrottling: function ManageThrottling(request) {\n    if (!this.isInitialized) {\n      throw new Error('You should initialize throttle module before using it.');\n    }\n    // Storing all request to array expect empty one.\n    this.requests.push(request);\n\n    // If making requests and timeout still process discard from beginning to don't exceed limit\n    if (this.requests.length > this.elementsForAllRequests) {\n      this.requests.shift();\n    }\n\n    // Don't make anther timeout when i actually making one.\n    if (this.timeoutRef) {\n      return;\n    }\n    // Serve 'elementsPerRequest' request if 'requests' not empty call it again and serve\n    // 'elementsPerRequest' so on after 'delayTimePerRequest'.\n    (function serveAllRequests() {\n      throttle.timeoutRef = Djaty.utils.djatySetTimeout(function () {\n        throttle.buffer.manageBuffer(throttle.requests.splice(0, throttle.elementsPerRequest));\n        throttle.timeoutRef = undefined;\n        // If there more requests in our object they need to serve so recall\n        // ManageThrottling again with empty object till serve all requests.\n        if (throttle.requests.length) {\n          serveAllRequests();\n\n          return;\n        }\n\n        if (throttle.shouldBeDestroyed) {\n          throttle.shouldBeDestroyed = false;\n          throttle.destroy();\n        }\n      }, throttle.delayTimePerRequest);\n    })();\n  },\n\n  /**\n   * Destroy throttle module\n   *\n   * return void\n   */\n  destroy: function destroy() {\n    if (this.requests.length) {\n      this.shouldBeDestroyed = true;\n\n      return;\n    }\n\n    this.isInitialized = false;\n    clearTimeout(this.timeoutRef);\n    this.elementsPerRequest = 0;\n    this.elementsForAllRequests = 0;\n    this.delayTimePerRequest = 0;\n    buffer.destroy();\n  }\n};\n//# sourceMappingURL=throttling.js.map\n\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n(function () {\n  /**\n   * Djaty Tracking Parent App Singleton Object.\n   *\n   * This object help building the tracking process in terms of modules. Every module/component\n   * registers itself and this object control and manage them.\n   *\n   * This file is combined with other tracking files using 'gulp' then the generated\n   * file will be injected by the extension or manually by including the file.\n   */\n\n  /* global LocalStorageWrapper, browserData , throttle, autoReport */\n\n  Djaty.trackingApp = {\n    trackers: {},\n\n    // localStorage similar to database connections.\n    localStorage: null,\n    isInitiated: false,\n    agentId: 'jsFrontendAgent',\n    agentVersion: '1.0.0',\n    throttleModule: null,\n    submitterCb: null,\n    /* ######################################################################## */\n    /* ############################# PUBLIC METHODS ########################### */\n    /* ######################################################################## */\n\n    /** *************************** Initializing Obj ************************** */\n    /**\n     * Initialization this object by initialization all components.\n     *\n     * @return void\n     */\n    init: function init() {\n      var _this = this;\n\n      // Prevent calling Djaty.init() twice and don't init trackingApp if initApp not initialized.\n      if (this.isInitiated || !Djaty.initApp.isInitiated) {\n        return;\n      }\n\n      this.isInitiated = true;\n\n      // Prevent initialization without registering the storage.\n      if (!this.localStorage || !this.memoryStorage) {\n        throw new Error('Please register Djaty Storage first');\n      }\n\n      try {\n        Djaty.logger.info('Init trackingApp');\n        Djaty.utils.djatySetTimeout = Djaty.utils.getTryCatchHandler('setTimeout', window);\n        Djaty.utils.djatyAjax = Djaty.utils.getTryCatchHandler('_ajax', Djaty.utils);\n        var initApp = Djaty.initApp;\n\n        initApp.addInFrontOfSubmitHandler(this._filterSecret);\n\n        // initialize throttle module and save it to tracking app.\n        if (!throttle.isInitialized) {\n          var agentConstData = this.getAgentConstData();\n          Djaty.utils.forOwn(Djaty.config, function (propName, prop) {\n            if (propName === 'tags' && prop.length > 0 || propName === 'stage' && prop.length > 0) {\n              agentConstData[propName] = prop;\n            }\n          });\n\n          this.throttleModule = throttle.init(agentConstData);\n        }\n\n        // initialize auto report module and save it to trackingApp.\n        if (!autoReport.isInitiated) {\n          var _autoReport;\n\n          var _agentConstData = this.getAgentConstData();\n          delete _agentConstData.release;\n\n          var usedTrackerInAutoReport = ['console', 'exception'].map(function (tracker) {\n            return _this.trackers[tracker].timelineFormatter.bind(_this.trackers[tracker]);\n          });\n\n          this.autoReportModule = (_autoReport = autoReport).init.apply(_autoReport, [_agentConstData].concat(_toConsumableArray(usedTrackerInAutoReport)));\n        }\n\n        // Iterate over trackers\n        Djaty.utils.forOwn(this.trackers, function (itemType, tracker) {\n          // Get initial tracker and send it to the tracker.\n          var localStorageWrapper = new LocalStorageWrapper(itemType, _this.localStorage);\n\n          // Initiate every tracker object\n          tracker.init(localStorageWrapper);\n        });\n\n        // Destroy disabled trackers.\n        Djaty.utils.forOwn(Djaty.constants.itemType, function (itemKey, itemValue) {\n          if (!Djaty.config.trackingOptions[itemValue]) {\n            initApp.trackers[itemValue].destroy();\n          }\n        });\n\n        // Format initialFormData\n        Djaty.initApp.initialFormData.forEach(function (formItem) {\n          Djaty.trackingApp.trackers.form.timelineFormatter(formItem);\n        });\n\n        Djaty.initApp.initialFormData = [];\n\n        Djaty.trackingApp._formatInitAppTimelineItems(0);\n      } catch (err) {\n        Djaty.logger.error('Catch Init trackingApp with error', err);\n      }\n    },\n\n\n    /**\n     * Destroy this object by destroy all components.\n     *\n     * @return void\n     */\n    // eslint-disable-next-line no-unused-vars\n    destroy: function destroy() {\n      Djaty.logger.info('Destroy trackingApp');\n      if (!this.isInitiated) {\n        return;\n      }\n\n      this.isInitiated = false;\n      this.throttleModule.destroy();\n      this.autoReportModule.destroy();\n      this.timeline = Djaty.initApp.timeline;\n    },\n\n\n    /**\n     * Format initApp timeline items\n     *\n     * @param length\n     * @private\n     */\n    _formatInitAppTimelineItems: function _formatInitAppTimelineItems(length) {\n      try {\n        if (length >= Djaty.initApp.timeline.length) {\n          Djaty.initApp.regCoreTrackingCb(Djaty.trackingApp._onTrackingCb);\n          if (Djaty.initApp.timeline.length < Djaty.config.timelineLimit) {\n            return;\n          }\n\n          Djaty.initApp.timeline.splice(0, length - Djaty.config.timelineLimit + 1);\n          Djaty.initApp.timeline.unshift({ itemType: 'trimming' });\n\n          return;\n        }\n\n        // Remove un-tracked items\n        if (!Djaty.config.trackingOptions[Djaty.initApp.timeline[length].itemType]) {\n          Djaty.initApp.timeline.splice(length, 1);\n          Djaty.trackingApp._formatInitAppTimelineItems(length);\n\n          return;\n        }\n\n        var item = Djaty.initApp.timeline[length];\n\n        // To avoid using unloaded trackers in old versions.\n        if (!Djaty.trackingApp.trackers[item.itemType]) {\n          var itemIndex = Djaty.initApp.timeline.indexOf(item);\n\n          Djaty.initApp.timeline.splice(itemIndex, 1);\n          Djaty.trackingApp._formatInitAppTimelineItems(itemIndex);\n\n          return;\n        }\n\n        // We have two type of items:\n        // - Normal items: We get all details of the timeline item only once.\n        // - Pending items: They have 2 states (pending, finished):\n        //   - State Pending: The timeline item has initial data which is still valid for\n        //                    submission. We store a timeline snapshot inside the tracker to be used\n        //                    if the item becomes Finished with an error.\n        //   - State Finished: The timeline item is now filled with all data. If it's an error,\n        //                     we use the timeline snapshot array instead of the main one.\n        //                     (To send the actual activities at the item created not when\n        //                     being finished to avoid taking later items with the bug submission)\n        Djaty.trackingApp.trackers[item.itemType].timelineFormatter(item, function (_ref) {\n          var formattedObj = _ref.formattedObj,\n              type = _ref.type,\n              isIgnored = _ref.isIgnored,\n              state = _ref.state;\n\n          var itemIndex = Djaty.initApp.timeline.indexOf(item);\n\n          if (isIgnored) {\n            Djaty.initApp.timeline.splice(itemIndex, 1);\n            Djaty.trackingApp._formatInitAppTimelineItems(itemIndex);\n\n            return;\n          }\n\n          // I merge the typical items into one item with increasing the `repetitionCount`\n          // by one and remove the new one\n          // I check for:\n          // - length to avoid do this condition on first item in timeline\n          // - `Djaty.initApp.timeline[length - 1].hash` and\n          //   `Djaty.initApp.timeline[length - 1].repetitionCount` it's a bug\n          //    or something can counted (like console)\n          // - `formattedObj.hash === Djaty.initApp.timeline[length - 1].hash` current item is\n          //   the same with previous one\n          if (length && Djaty.initApp.timeline[length - 1].hash && Djaty.initApp.timeline[length - 1].repetitionCount && formattedObj.hash === Djaty.initApp.timeline[length - 1].hash) {\n            Djaty.initApp.timeline.splice(itemIndex, 1);\n            --itemIndex;\n            --length;\n            Djaty.initApp.timeline[length].repetitionCount++;\n            Djaty.initApp.timeline[length] = Djaty.utils.assign({}, Djaty.initApp.timeline[length]);\n          }\n\n          // For initial tracking (before formatting initial timeline items), the `Pending` items\n          // will be added to timeline twice and we edit first item and remove duplicate one.\n          if (Djaty.trackingApp.trackers[item.itemType].getErrorData && state === 'finished') {\n            // Remove new duplicate item\n            Djaty.initApp.timeline.splice(itemIndex, 1);\n            if (type !== 'error') {\n              Djaty.trackingApp._formatInitAppTimelineItems(itemIndex);\n\n              return;\n            }\n\n            var _errorData = Djaty.trackingApp.trackers[item.itemType].getErrorData(item.reqId);\n\n            Djaty.trackingApp._handleSendingData(_errorData);\n            Djaty.trackingApp._formatInitAppTimelineItems(itemIndex);\n\n            return;\n          }\n\n          // Edit on timeline item by reference to reflect on any clone from timeline\n          // items (like clone of timeline for pending ajax).\n          Djaty.utils.forOwn(item, function (key) {\n            if (key === 'itemType') {\n              return;\n            }\n\n            delete item[key];\n          });\n\n          Djaty.utils.assign(item, formattedObj);\n\n          if (type !== 'error') {\n            Djaty.trackingApp._formatInitAppTimelineItems(++length);\n\n            return;\n          }\n\n          var errorData = Djaty.trackingApp._getErrorDataToIdx(itemIndex);\n          Djaty.trackingApp._handleSendingData(errorData);\n\n          Djaty.trackingApp._formatInitAppTimelineItems(++length);\n        });\n      } catch (err) {\n        Djaty.logger.error('Unable to format initial timeline items', err);\n      }\n    },\n\n\n    /** *********************** Tracker Registration *************************** */\n    /**\n     * Register new tracker.\n     *\n     * @param {Object} itemType\n     * @param {Object} tracker\n     * @return void\n     */\n    addTracker: function addTracker(itemType, tracker) {\n      // Prevent any tracker from registering itself twice.\n      if (this.trackers[itemType]) {\n        return;\n      }\n\n      this.trackers[itemType] = tracker;\n    },\n\n\n    /**\n     * Check if timeline item is ignored or not\n     *\n     * @param {object} error\n     * @param {string} itemType\n     */\n    isTimelineIgnored: function isTimelineIgnored(error, itemType) {\n      if (!Djaty.initApp.ignoreTimelineItem) {\n        return false;\n      }\n\n      var clonedFormattedItem = Djaty.utils.assign({}, error, { itemType: itemType });\n\n      var utils = {\n        console: Djaty.initApp.originalMethods.trackConsole\n      };\n\n      try {\n        return Djaty.initApp.ignoreTimelineItem(clonedFormattedItem, utils);\n      } catch (err) {\n        utils.console.error('Unable to ignore the timeline item. Please check ' + '`config.ignoreTimelineItem()` option to be implemented properly.', clonedFormattedItem, err);\n\n        return false;\n      }\n    },\n\n\n    /**\n     * Check if error is ignored or not\n     *\n     * @param {String} error\n     */\n    isIgnoredError: function isIgnoredError(error) {\n      return Djaty.initApp.ignoredErrors.some(function (ignoredError) {\n        return error.indexOf(ignoredError) !== -1;\n      });\n    },\n\n    /** ************************** Storage Registration ************************ */\n    /**\n     * Register memory Storage.\n     *\n     * @param {Object} storage\n     * @return void\n     */\n    registerMemoryStorage: function registerMemoryStorage(storage) {\n      // Prevent memory storage from registering itself twice.\n      if (this.memoryStorage) {\n        return;\n      }\n\n      this.memoryStorage = storage;\n    },\n\n\n    /**\n     * Register local Storage.\n     *\n     * @param {Object} storage\n     * @return void\n     */\n    registerLocalStorage: function registerLocalStorage(storage) {\n      // Prevent localStorage from registering itself twice.\n      if (this.localStorage) {\n        return;\n      }\n\n      this.localStorage = storage;\n    },\n\n    /**\n     * Register Submitter Cb.\n     *\n     * @param {Function} cb\n     */\n    regOnSubmitCb: function regOnSubmitCb(cb) {\n      this.submitterCb = cb;\n    },\n\n    /**\n     * Set namespace in configuration\n     *\n     * @param ns\n     */\n    setNamespace: function setNamespace(ns) {\n      var structure = {\n        types: ['string'],\n        required: true,\n        constrains: {\n          maxLength: 50,\n          minLength: 4\n        }\n      };\n\n      Djaty.utils.validate('setNamespace', structure, ns);\n      Djaty.config.namespace = ns;\n    },\n\n\n    /**\n     * Get config namespace\n     *\n     * @return {*}\n     */\n    getNamespace: function getNamespace() {\n      return Djaty.config.namespace;\n    },\n\n    /**\n     * Set apiKey in configuration\n     *\n     * @param apiKey\n     */\n    setAPIKey: function setAPIKey(apiKey) {\n      var structure = {\n        types: ['string'],\n        required: true,\n        constrains: {\n          maxLength: 255,\n          minLength: 6\n        }\n      };\n\n      Djaty.utils.validate('setApiKey', structure, apiKey);\n      Djaty.config.apiKey = apiKey;\n    },\n    getAllowAutoSubmissionState: function getAllowAutoSubmissionState() {\n      return Djaty.config.allowAutoSubmission;\n    },\n    setAllowAutoSubmissionState: function setAllowAutoSubmissionState(state) {\n      var structure = {\n        types: ['boolean'],\n        required: true\n      };\n\n      Djaty.utils.validate('setAllowAutoSubmission', structure, state);\n      Djaty.config.allowAutoSubmission = state;\n    },\n\n    /**\n     * Set extension state\n     *\n     * @param state\n     */\n    setExtensionState: function setExtensionState(state) {\n      var structure = {\n        types: ['boolean'],\n        required: true\n      };\n\n      Djaty.utils.validate('setExtensionState', structure, state);\n      Djaty.initApp.isExtension = state;\n    },\n    getJSFrontendAgentConfig: function getJSFrontendAgentConfig() {\n      return Djaty.initApp.jsFrontendConfig;\n    },\n\n    /**\n     * Allow user to add any custom data.\n     *\n     * @return {object}\n     */\n    getTrackingData: function getTrackingData() {\n      if (!this.localStorage || !this.memoryStorage) {\n        throw new Error('Please init() Djaty first');\n      }\n\n      var data = {};\n      var browserLocalData = browserData.getData();\n      // To check if localStorage, sessionStorage, cookies should be tracked\n      Djaty.utils.forOwn(browserLocalData, function (propName, propValue) {\n        if (!Djaty.config.trackingOptions[propName]) {\n          return;\n        }\n\n        data[propName] = propValue;\n        if ((typeof propValue === 'undefined' ? 'undefined' : _typeof(propValue)) !== 'object') {\n          return;\n        }\n\n        // To check length of properties of (localStorage, ...) to replace when exceed\n        Djaty.utils.forOwn(data[propName], function (propKey, value) {\n          if (value.length > Djaty.constants.requestSizeLimit) {\n            data[propName][propKey] = 'Size of ' + propKey + ' of ' + propName + ' is too long';\n          }\n        });\n      });\n\n      // Djaty.utils.assign(data, browserData.getData());\n      if (typeof data.cookies === 'string') {\n        data.cookies = Djaty.utils.convertStrToPair(data.cookies, ';', '=');\n      }\n\n      data.user = Djaty.trackingApp._getUser();\n\n      // Load all tracked data.\n      var form = Djaty.config.trackingOptions.form === false ? this.localStorage.remove('form') : this.localStorage.getData('form') || {};\n\n      var timelineData = { timeline: Djaty.initApp.timeline };\n\n      // Load user data from Djaty initial tracking object\n      Djaty.utils.assign(data, { curUrl: window.location.href }, { form: form },\n\n      // To avoid passing the reference of globalCustomData during sending,\n      // Sending exact globalCustomData items for each bug report.\n      timelineData, { customData: Djaty.initApp.globalCustomData.slice() });\n\n      return data;\n    },\n\n\n    /**\n     * Get user agent data includes: browser, cpu, device, engine and os details.\n     * and agentID and agentVersion\n     *\n     * @return {object}\n     */\n    getAgentConstData: function getAgentConstData() {\n      var constData = {\n        agentId: this.agentId,\n        agentVersion: this.agentVersion,\n        userAgent: Djaty.libs.UAParser(),\n        screen: {\n          colorDepth: window.screen.colorDepth,\n          screenSize: window.innerWidth + ' x ' + window.innerHeight\n        },\n        hashType: Djaty.constants.hashType\n      };\n\n      if (Djaty.config.release) {\n        constData.release = Djaty.config.release;\n      }\n\n      return constData;\n    },\n\n    /**\n     * Get agent data that filtered by user's filters 'onSubmitHandlers'.\n     *\n     * @return {object}\n     */\n    getFilteredData: function getFilteredData(data, cb) {\n      Djaty.utils.asyncLoop(Djaty.initApp.onSubmitHandlers, [data], Djaty.trackingApp.throttleModule, cb);\n    },\n\n\n    /** ************************ Accept User Custom Data *********************** */\n    /**\n     * Allow user to add any custom data.\n     * This function overrides the the added one of Djaty.initApp as we here\n     * make a new Djaty object that will lack to that fn if missed.\n     *\n     * @param {Object} data\n     * @param {Function} cb\n     * @return void\n     */\n    addCustomData: function addCustomData(data, cb) {\n      if (typeof cb !== 'function') {\n        throw new Error('Make sure you pass \"Djaty.addCustomData\" parameter as a function');\n      }\n\n      data.customData.push(cb());\n    },\n\n\n    /* ######################################################################## */\n    /* ############################ PRIVATE METHODS ########################### */\n    /* ######################################################################## */\n    /**\n     * Handle insert new items to timeline or increment last counter\n     *\n     * @param item\n     * @param formattedObj\n     * @returns {number}\n     * @private\n     */\n    _handleInsertItemIntoTimeline: function _handleInsertItemIntoTimeline(item, formattedObj) {\n      var app = Djaty.initApp;\n      var lastItem = app.timeline[app.timeline.length - 1];\n      var isLastItem = lastItem && lastItem.repetitionCount && lastItem.hash === formattedObj.hash;\n\n      formattedObj.itemType = item.itemType;\n\n      var itemIndex = app.timeline.indexOf(item);\n      if (itemIndex === -1 && !isLastItem) {\n        if (app.timeline.length >= Djaty.config.timelineLimit) {\n          if (app.timeline[0].itemType === Djaty.constants.trimmingItemType) {\n            app.timeline.splice(1, 1);\n          } else {\n            app.timeline.shift();\n            app.timeline.unshift({ itemType: Djaty.constants.trimmingItemType });\n          }\n        }\n\n        // Update on item by reference to reflect on any snapshot from this item.\n        Djaty.utils.forOwn(item, function (key) {\n          if (key === 'itemType') {\n            return;\n          }\n\n          delete item[key];\n        });\n\n        Djaty.utils.assign(item, formattedObj);\n\n        app.timeline.push(item);\n        itemIndex = app.timeline.indexOf(item);\n      } else if (itemIndex === -1 && isLastItem) {\n        // Handle new occ. for last item\n        lastItem.repetitionCount++;\n        itemIndex = app.timeline.length - 1;\n        Djaty.initApp.timeline[itemIndex] = Djaty.utils.assign({}, Djaty.initApp.timeline[itemIndex]);\n      }\n\n      return itemIndex;\n    },\n\n\n    /**\n     * Get timeline data from timeline array to specific index\n     *\n     * @param {Number} itemIndex\n     * @returns {Object}\n     * @private\n     */\n    _getErrorDataToIdx: function _getErrorDataToIdx(itemIndex) {\n      var currentData = Djaty.trackingApp.getTrackingData();\n      currentData.timeline = Djaty.initApp.timeline.slice(0, itemIndex + 1);\n\n      return currentData;\n    },\n\n    /**\n     * Filter error timeline data and handle long/short title for last item and send data to\n     * throttle manager or external listener\n     *\n     * @param currentData\n     */\n    _handleSendingData: function _handleSendingData(currentData) {\n      var filteredData = {};\n      var djatyBugReport = {\n        rawData: currentData,\n        addCustomDataCb: function addCustomDataCb(dataCb) {\n          Djaty.trackingApp.addCustomData(currentData, dataCb);\n        }\n      };\n\n      var app = Djaty.trackingApp;\n      var lastItemIndex = currentData.timeline.length - 1;\n      var lastTimelineItem = currentData.timeline[lastItemIndex];\n\n      currentData.hash = lastTimelineItem.hash;\n      currentData.longTitle = lastTimelineItem.longTitle;\n\n      if (lastTimelineItem.shortTitle) {\n        currentData.shortTitle = lastTimelineItem.shortTitle;\n        app.lastBugShortTitle = lastTimelineItem.shortTitle;\n        delete lastTimelineItem.shortTitle;\n      } else {\n        currentData.shortTitle = app.lastBugShortTitle;\n      }\n\n      currentData.bugType = lastTimelineItem.itemType;\n\n      app.getFilteredData(djatyBugReport, function (data) {\n        filteredData = data.rawData;\n        if (!filteredData.customData.length) {\n          delete filteredData.customData;\n        }\n\n        if (app.submitterCb) {\n          app.submitterCb.call(app.throttleModule, filteredData);\n        }\n\n        if (!Djaty.config.allowAutoSubmission) {\n          return;\n        }\n\n        app.throttleModule.ManageThrottling.call(app.throttleModule, filteredData);\n      });\n    },\n\n\n    /**\n     * A Callback called once tracking new items.\n     *\n     * @param {Object} item\n     */\n    _onTrackingCb: function _onTrackingCb(item) {\n      try {\n        // Don't format timeline items if not initiated\n        if (!Djaty.trackingApp.isInitiated) {\n          return;\n        }\n\n        var app = Djaty.trackingApp;\n\n        // To avoid using unloaded trackers in old versions.\n        if (!app.trackers[item.itemType]) {\n          return;\n        }\n\n        // We have two type of items:\n        // - Normal items: We get all details of the timeline item only once.\n        // - Pending items: They have 2 states (pending, finished):\n        //   - State Pending: The timeline item has initial data which is still valid for\n        //                    submission. We store a timeline snapshot inside the tracker\n        //                    to be used if the item becomes Finished with an error.\n        //   - State Finished: The timeline item is now filled with all data. If it's an error,\n        //                     we use the timeline snapshot array instead of the main one.\n        //                     (To send the actual activities at the item created not when\n        //                     being finished to avoid taking later items with the bug submission)\n        app.trackers[item.itemType].timelineFormatter(item, function (_ref2) {\n          var formattedObj = _ref2.formattedObj,\n              type = _ref2.type,\n              isIgnored = _ref2.isIgnored,\n              state = _ref2.state;\n\n          if (isIgnored) {\n            return;\n          }\n\n          if (app.trackers[item.itemType].getErrorData && state === 'finished') {\n            if (type !== 'error') {\n              return;\n            }\n\n            var _errorData2 = Djaty.trackingApp.trackers[item.itemType].getErrorData(item.reqId);\n            Djaty.trackingApp._handleSendingData(_errorData2);\n\n            return;\n          }\n\n          var itemIndex = Djaty.trackingApp._handleInsertItemIntoTimeline(item, formattedObj);\n          if (type !== 'error') {\n            return;\n          }\n\n          var errorData = Djaty.trackingApp._getErrorDataToIdx(itemIndex);\n          Djaty.trackingApp._handleSendingData(errorData);\n        });\n      } catch (err) {\n        Djaty.logger.error('Catch error in onTrackingCb', err);\n      }\n    },\n\n\n    // Method check if this is equal to target or not\n    _find: function _find(item, target) {\n      return item.toLowerCase().indexOf(target) > -1;\n    },\n\n\n    // Method to loop over secret data items\n    _replaceIfFound: function _replaceIfFound(cb) {\n      Djaty.config.trackingOptions.removeSecretData.forEach(function (secretItem) {\n        cb(secretItem);\n      });\n    },\n\n\n    // Method to check if property found in mode option or not.\n    _resolveIfFound: function _resolveIfFound(options, data, propName, cb) {\n      if (!options[propName] || !data) {\n        return;\n      }\n\n      cb();\n    },\n    _filterAjax: function _filterAjax(item) {\n      var _this2 = this;\n\n      // filter url\n      var secretDataStr = Djaty.config.trackingOptions.removeSecretData.join('|');\n      var regex = new RegExp('(' + secretDataStr + ')=([^&]*)', 'gi');\n      item.openParams.url = item.openParams.url.replace(regex, '$1=' + Djaty.constants.privacyPlaceHolder);\n\n      // ajax cookies\n      Djaty.trackingApp._resolveIfFound(Djaty.config.trackingOptions.ajax, item.cookies, 'cookies', function () {\n        item.cookies.forEach(function (cookie) {\n          return _this2._replaceIfFound(function (secretItem) {\n            if (_this2._find(cookie.name, secretItem)) {\n              cookie.value = Djaty.constants.privacyPlaceHolder;\n            }\n          });\n        });\n      });\n\n      // ajax headers\n      Djaty.trackingApp._resolveIfFound(Djaty.config.trackingOptions.ajax, item.headers, 'headers', function () {\n        Djaty.utils.forOwn(item.headers, function (propName) {\n          item.headers[propName].forEach(function (header) {\n            return _this2._replaceIfFound(function (secretItem) {\n              if (_this2._find(header.name, secretItem)) {\n                header.value = Djaty.constants.privacyPlaceHolder;\n              }\n            });\n          });\n        });\n      });\n\n      // ajax queryParams\n      Djaty.trackingApp._resolveIfFound(Djaty.config.trackingOptions.ajax, item.queryParams, 'queryParams', function () {\n        item.queryParams.forEach(function (queryParam) {\n          return _this2._replaceIfFound(function (secretItem) {\n            if (_this2._find(queryParam.name, secretItem)) {\n              queryParam.value = Djaty.constants.privacyPlaceHolder;\n            }\n          });\n        });\n      });\n\n      // ajax payload\n      Djaty.trackingApp._resolveIfFound(Djaty.config.trackingOptions.ajax, item.requestPayload, 'requestPayload', function () {\n        if (item.requestPayload instanceof window.FormData) {\n          (function () {\n            var formattedPayload = {};\n            // eslint-disable-next-line\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n              var _loop = function _loop() {\n                var pair = _step.value;\n\n                _this2._replaceIfFound(function (secretItem) {\n                  if (_this2._find(pair[0], secretItem)) {\n                    item.requestPayload.set(pair[0], Djaty.constants.privacyPlaceHolder);\n                  }\n                  formattedPayload[pair[0]] = pair[1];\n                });\n              };\n\n              for (var _iterator = item.requestPayload.entries()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                _loop();\n              }\n            } catch (err) {\n              _didIteratorError = true;\n              _iteratorError = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion && _iterator.return) {\n                  _iterator.return();\n                }\n              } finally {\n                if (_didIteratorError) {\n                  throw _iteratorError;\n                }\n              }\n            }\n\n            item.requestPayload = formattedPayload;\n          })();\n        } else if (item.requestPayload && item.requestPayload.constructor.name === 'Object') {\n          Djaty.utils.forOwn(item.requestPayload, function (propName) {\n            _this2._replaceIfFound(function (secretItem) {\n              if (_this2._find(propName, secretItem)) {\n                item.requestPayload[propName] = Djaty.constants.privacyPlaceHolder;\n              }\n            });\n          });\n        }\n      });\n    },\n    _filterSecret: function _filterSecret(bugReport, next) {\n      // Don't filter any secret data from bugReport if `removeSecretData` option is disabled.\n      if (!Djaty.config.trackingOptions || !Djaty.config.trackingOptions.removeSecretData) {\n        next(bugReport);\n        return;\n      }\n\n      var trackingApp = Djaty.trackingApp;\n      var data = bugReport.rawData;\n\n      // filter cookies\n      Djaty.trackingApp._resolveIfFound(Djaty.config.trackingOptions, data.cookies, 'cookies', function () {\n        data.cookies.forEach(function (item) {\n          trackingApp._replaceIfFound(function (secretItem) {\n            if (trackingApp._find(item.name, secretItem)) {\n              item.value = Djaty.constants.privacyPlaceHolder;\n            }\n          });\n        });\n      });\n\n      // filter localStorage\n      Djaty.trackingApp._resolveIfFound(Djaty.config.trackingOptions, data.localStorage, 'localStorage', function () {\n        Djaty.utils.forOwn(data.localStorage, function (propName) {\n          trackingApp._replaceIfFound(function (secretItem) {\n            if (trackingApp._find(propName, secretItem)) {\n              data.localStorage[propName] = Djaty.constants.privacyPlaceHolder;\n            }\n          });\n        });\n      });\n\n      // filter sessionStorage\n      Djaty.trackingApp._resolveIfFound(Djaty.config.trackingOptions, data.sessionStorage, 'sessionStorage', function () {\n        Djaty.utils.forOwn(data.sessionStorage, function (propName) {\n          trackingApp._replaceIfFound(function (secretItem) {\n            if (trackingApp._find(propName, secretItem)) {\n              data.sessionStorage[propName] = Djaty.constants.privacyPlaceHolder;\n            }\n          });\n        });\n      });\n\n      // filter form\n      Djaty.trackingApp._resolveIfFound(Djaty.config.trackingOptions, data.form, 'form', function () {\n        Djaty.utils.forOwn(data.form, function (propName, propValue) {\n          trackingApp._replaceIfFound(function (secretItem) {\n            propValue.inputs.forEach(function (input, index) {\n              // Handle multiple select elements\n              if (Array.isArray(data.form[propName].inputs[index].values)) {\n                propValue.inputs[index].values.forEach(function (select, selectIdx) {\n                  if (trackingApp._find(select.text, secretItem)) {\n                    data.form[propName].inputs[index].values[selectIdx].value = Djaty.constants.privacyPlaceHolder;\n                  }\n                });\n\n                return;\n              }\n\n              if (trackingApp._find(input.name, secretItem) || trackingApp._find(input.type, secretItem)) {\n                data.form[propName].inputs[index].value = Djaty.constants.privacyPlaceHolder;\n              }\n            });\n          });\n        });\n      });\n\n      // timeline items\n      // ajax items\n      data.timeline.forEach(function (item) {\n        if (item.itemType !== Djaty.constants.itemType.ajax) {\n          return;\n        }\n\n        Djaty.utils.forOwn(Djaty.config.trackingOptions.ajax, function (propName, propValue) {\n          if (!propValue) {\n            return;\n          }\n\n          trackingApp._filterAjax(item);\n        });\n      });\n\n      next(bugReport);\n    },\n\n\n    /**\n     * Get user\n     *\n     * @private\n     * @return {*}\n     */\n    _getUser: function _getUser() {\n      return Djaty.config.user ? Djaty.utils.assign({}, Djaty.config.user) : undefined;\n    }\n  };\n})();\n//# sourceMappingURL=djaty.js.map\n\n'use strict';\n\n/**\n* Memory Storage Handler Singleton.\n*\n* This obj deals with memory to save/load data.\n*/\n\nvar memoryStorage = {\n  container: {},\n\n  /* ###################################################################### */\n  /* ########################### PUBLIC METHODS ########################### */\n  /* ###################################################################### */\n  /**\n   * Save new data to memory.\n   *\n   * @param {String} key\n   * @param {Object} item\n   * @return {void}\n   */\n  set: function set(key, item) {\n    if (!key || !item) {\n      throw new Error('You must provide \\'key\\' and item');\n    }\n\n    if (typeof key !== 'string') {\n      throw new Error('push \\'key\\' must be a string');\n    }\n\n    var memoryObj = this.container;\n    memoryObj[key] = item;\n  },\n\n\n  /**\n  * load data from memory.\n  *\n  * @param {String} key\n  * @return {Object}\n  */\n  getData: function getData() {\n    var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n    if (key && typeof key !== 'string') {\n      throw new Error('load \\'key\\' must be a string');\n    }\n\n    var memoryObj = this.container;\n\n    // Return cloned data to prevent editing the real memory data.\n    // Get the whole object if no key is passed.\n    if (!key) {\n      return Djaty.utils.assign({}, memoryObj);\n    }\n\n    return Djaty.utils.assign([], memoryObj[key]);\n  }\n};\n\nDjaty.trackingApp.registerMemoryStorage(memoryStorage);\n//# sourceMappingURL=memoryStorage.js.map\n\n'use strict';\n\n/**\n * LocalStorage Handler Singleton.\n *\n * This obj deals with localStorage to save/load data. It also makes elementary\n * processes like limiting localStorage size.\n */\n\n/* global localStorage */\nvar djatyLocalStorage = {\n\n  /* ###################################################################### */\n  /* ########################### PUBLIC METHODS ########################### */\n  /* ###################################################################### */\n\n  /**\n   * Save new data to localStorage.\n   *\n   * @param {String} key\n   * @param {Object} item\n   * @return {void}\n   */\n  set: function set(key, item) {\n    if (!key || !item) {\n      throw new Error('You must provide \\'key\\' and item');\n    }\n\n    if (typeof key !== 'string') {\n      throw new Error('push \\'key\\' must be a string');\n    }\n\n    var localStorageStr = localStorage.getItem('DjatyTracking');\n    var localStorageObj = localStorageStr ? JSON.parse(localStorageStr) : {};\n\n    localStorageObj[key] = item;\n\n    localStorageStr = JSON.stringify(Djaty.utils.removeCircular(localStorageObj));\n    // localStorageStr = JSON.stringify(localStorageObj);\n    localStorage.setItem('DjatyTracking', localStorageStr);\n  },\n\n\n  /**\n   * load data from localStorage.\n   *\n   * @param {String} key\n   * @return {Object}\n   */\n  getData: function getData() {\n    var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n    if (key && typeof key !== 'string') {\n      throw new Error('load \\'key\\' must be a string');\n    }\n\n    var localStorageStr = localStorage.getItem('DjatyTracking');\n    var localStorageObj = localStorageStr ? JSON.parse(localStorageStr) : {};\n\n    // Return cloned data to prevent editing the real localStorage data.\n    // Get the whole object if no key is passed.\n    if (!key) {\n      return Djaty.utils.assign({}, localStorageObj);\n    }\n\n    var item = localStorageObj[key] ? localStorageObj[key] : {};\n    return Djaty.utils.assign({}, item);\n  },\n\n\n  /**\n   * remove data from localStorage.\n   *\n   * @param {String} key\n   * @return {void}\n   */\n  remove: function remove(key) {\n    if (!key || typeof key !== 'string') {\n      throw new Error('load \\'key\\' must be a string');\n    }\n\n    var localStorageStr = localStorage.getItem('DjatyTracking');\n    var localStorageObj = localStorageStr ? JSON.parse(localStorageStr) : {};\n    delete localStorageObj[key];\n    localStorageStr = JSON.stringify(Djaty.utils.removeCircular(localStorageObj));\n    localStorage.setItem('DjatyTracking', localStorageStr);\n  }\n};\n\nDjaty.trackingApp.registerLocalStorage(djatyLocalStorage);\n//# sourceMappingURL=localStorage.js.map\n\n\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n* LocalStorageWrapper Class\n*\n* The following class designed to wrap localstorage object and prevent any tracker\n* from access localstorage obj directly.\n*/\n\n// eslint-disable-next-line no-unused-vars\nvar LocalStorageWrapper = function () {\n\n  /** *********************** Initializing Obj *************************** */\n  function LocalStorageWrapper(itemType, localStorage) {\n    _classCallCheck(this, LocalStorageWrapper);\n\n    this.localStorage = localStorage;\n    this.itemType = itemType;\n  }\n\n  /* ######################################################################## */\n  /* ############################ PUBLIC METHODS ############################ */\n  /* ######################################################################## */\n\n  /**\n   * Initialization logic by adding needed event handlers.\n   *\n   * @return  {void}\n   */\n\n\n  _createClass(LocalStorageWrapper, [{\n    key: \"set\",\n    value: function set(key, item) {\n      var data = this.localStorage.getData(this.itemType);\n      data[key] = item;\n      this.localStorage.set(this.itemType, data);\n    }\n  }]);\n\n  return LocalStorageWrapper;\n}();\n//# sourceMappingURL=localStorageWrapper.js.map\n\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/**\n* Tracking Ajax requests.\n*\n* This file is combined with other tracking files using 'gulp' then the generated\n* file will be injected by the extension or manually by including the file.\n*/\n\n/* global Event, URL */\n\nvar ajaxTracker = {\n  pendingRequests: {},\n\n  /* ###################################################################### */\n  /* ########################### PUBLIC METHODS ########################### */\n  /* ###################################################################### */\n\n  /** *********************** Initializing Obj **************************** */\n  /**\n  * Initialization of the tracker.\n  *\n  * @return void\n  */\n  init: function init() {},\n\n\n  /**\n   * Save Data into timeline.\n   *\n   * @param  {Object} item\n   * @param  {Function} cb\n   * @return {void}\n   */\n  timelineFormatter: function timelineFormatter(item, cb) {\n    if (!Array.isArray(item.reqArgs)) {\n      throw new Error('Make sure you pass \"reqArgs\" parameter as an array');\n    }\n\n    if (_typeof(item.headers) !== 'object') {\n      throw new Error('Make sure you pass \"headers\" parameter as an object');\n    }\n\n    // Handle `pending` items\n    if (item.state === 'pending') {\n      if (typeof item.ajaxCookie !== 'string') {\n        throw new Error('Make sure you pass \"ajaxCookie\" parameter as an string');\n      }\n\n      this._formatTimelinePendingObj(item, cb);\n\n      return;\n    }\n\n    if (!(item.ev instanceof Event && item.ev.type === 'readystatechange')) {\n      throw new Error('timelineFormatter only accept events of type \\'readystatechange\\'');\n    }\n\n    // Handle `finished` items\n    this._formatTimelineFinishedObj(item, cb);\n  },\n\n\n  /**\n   * Get error data for the `pending` item timeline items snapshot.\n   *\n   * ex: When normal ajax had been called the initial state\n   * for it is `pending` with (ex: `10` timeline items),\n   * but when this ajax becomes `finished` may main timeline has new timeline items,\n   * so I only need the timeline items when ajax is fired not current timeline items.\n   *\n   * @param reqId\n   * @returns {Object}\n   */\n  getErrorData: function getErrorData(reqId) {\n    var reqTimelineItem = this.pendingRequests[reqId];\n    delete this.pendingRequests[reqId];\n\n    var currentData = Djaty.trackingApp.getTrackingData();\n    currentData.timeline = reqTimelineItem;\n\n    return currentData;\n  },\n\n\n  /* ###################################################################### */\n  /* ########################### Private METHODS ########################## */\n  /* ###################################################################### */\n  /**\n  * responseText Allowed Types\n  *\n  * We need to check if ev.target.responseType is allowed because accessing\n  * ev.target.responseText for other responseTypes throws an error like the following:\n  * {Failed to read the 'responseXML' property from 'XMLHttpRequest': The value\n  * is only accessible if the object's 'responseType' is '' or 'document'\n  * (was 'arraybuffer').}\n  *\n  * @param  {String} type\n  * @return {Boolean}\n  */\n  _isTypeAllowed: function _isTypeAllowed(type) {\n    if (typeof type !== 'string') {\n      throw new Error('_isTypeAllowed only accept strings');\n    }\n\n    return 'document, json, text'.indexOf(type) > -1;\n  },\n\n\n  /**\n   * Format timeline object for pending ajax requests.\n   *\n   * @param item\n   * @param  {Function} cb\n   * @return {Function}\n   */\n  _formatTimelinePendingObj: function _formatTimelinePendingObj(item, cb) {\n    var reqArgs = item.reqArgs,\n        isAborted = item.isAborted,\n        requestPayload = item.requestPayload,\n        reqId = item.reqId,\n        time = item.time,\n        ajaxCookie = item.ajaxCookie,\n        headers = item.headers,\n        state = item.state;\n\n\n    if (!Array.isArray(reqArgs)) {\n      throw new Error('Make sure you pass \"reqArgs\" parameter as an array');\n    }\n\n    var paramUrl = reqArgs[1];\n\n    reqArgs[0] = reqArgs[0].toUpperCase();\n    var djatyRegId = '((djatyReqId|&djatyReqId)=[^&]*(?:&|$))';\n    var getDjatyReqId = paramUrl.match(djatyRegId);\n\n    paramUrl = getDjatyReqId ? paramUrl.replace(getDjatyReqId[0], '') : paramUrl;\n    var queryParamsObj = Djaty.utils.convertStrToPair(paramUrl.slice(paramUrl.indexOf('?') + 1, paramUrl.length), '&', '=');\n\n    reqArgs[1] = this._getFullURL(paramUrl);\n\n    var openParamsProp = ['method', 'url', 'async', 'user', 'password'];\n    var openArgs = {};\n\n    reqArgs.forEach(function (param, index) {\n      openArgs[openParamsProp[index]] = param;\n    });\n\n    var formattedObj = {\n      timestamp: time,\n      openParams: openArgs,\n      isAborted: isAborted,\n      reqId: reqId,\n      statusText: state\n    };\n\n    var headersData = {\n      requestHeaders: headers.requestHeaders\n    };\n\n    var cookies = Djaty.utils.convertStrToPair(ajaxCookie, ';', '=');\n    var payload = requestPayload && (requestPayload.length < Djaty.constants.requestSizeLimit ? requestPayload : 'PAYLOAD_TOO_LONG');\n\n    Djaty.utils.resolveProperty(Djaty.constants.itemType.ajax, formattedObj, 'headers', headersData, Djaty.config.trackingOptions);\n    Djaty.utils.resolveProperty(Djaty.constants.itemType.ajax, formattedObj, 'cookies', cookies, Djaty.config.trackingOptions);\n    Djaty.utils.resolveProperty(Djaty.constants.itemType.ajax, formattedObj, 'queryParams', queryParamsObj, Djaty.config.trackingOptions);\n\n    if (payload) {\n      Djaty.utils.resolveProperty(Djaty.constants.itemType.ajax, formattedObj, 'requestPayload', payload, Djaty.config.trackingOptions);\n    }\n\n    var itemIndex = Djaty.initApp.timeline.indexOf(item);\n    this.pendingRequests[reqId] = itemIndex === -1 ? Djaty.initApp.timeline.slice() : Djaty.initApp.timeline.slice(0, itemIndex);\n\n    this.pendingRequests[reqId].push(item);\n    return cb({ formattedObj: formattedObj });\n  },\n\n\n  /**\n   * Format timeline object for finished ajax requests\n   * (update on the `pending` item for it by reference).\n   *\n   * @param item\n   * @param cb\n   * @returns {*}\n   * @private\n   */\n  _formatTimelineFinishedObj: function _formatTimelineFinishedObj(item, cb) {\n    var ev = item.ev,\n        reqArgs = item.reqArgs,\n        isAborted = item.isAborted,\n        reqId = item.reqId,\n        requestTime = item.requestTime,\n        headers = item.headers,\n        state = item.state;\n\n\n    if (!(ev instanceof Event && ev.type === 'readystatechange')) {\n      throw new Error('_formatTimelineObj only accept events of type \\'readystatechange\\'');\n    }\n\n    if (!Array.isArray(reqArgs)) {\n      throw new Error('Make sure you pass \"reqArgs\" parameter as an array');\n    }\n\n    if (!this.pendingRequests[reqId]) {\n      throw new Error('Unable to reformatting completed ajax without pending data for it.');\n    }\n\n    var formattedObj = this.pendingRequests[reqId].slice(-1)[0];\n    var djatyRegId = '((djatyReqId|&djatyReqId)=[^&]*(?:&|$))';\n    var target = ev.target;\n\n    if (typeof formattedObj.openParams.url === 'string' && (target.status >= 500 || target.status === 0) && Djaty.trackingApp.isIgnoredError(formattedObj.openParams.url)) {\n      var timelineItemIndex = Djaty.initApp.timeline.indexOf(formattedObj);\n\n      if (timelineItemIndex !== -1) {\n        Djaty.initApp.timeline.splice(timelineItemIndex, 1);\n      }\n\n      delete this.pendingRequests[reqId];\n\n      return cb({ isIgnored: true, type: 'error', state: state });\n    }\n\n    var allowedResp = this._isTypeAllowed(target.responseType) ? target.responseText : '';\n\n    formattedObj.status = target.status;\n    formattedObj.statusText = target.statusText;\n    formattedObj.isAborted = isAborted;\n\n    // will be saved as empty obj as all ev.target attrs are non enumerable\n    // and JSON.stringify() ignores non enumerable attrs.\n    // response: ev.target,\n    // So, lets save needed data only\n    var response = {\n      responseText: allowedResp.length < Djaty.constants.requestSizeLimit ? allowedResp : 'Text too long',\n      responseType: target.responseType,\n      responseURL: target.responseURL.replace(target.response && target.responseURL.match(djatyRegId)[0], ''),\n      withCredentials: target.withCredentials\n    };\n\n    var headersData = {\n      responseHeaders: Djaty.utils.convertStrToPair(headers.responseHeaders, '\\n', ': '),\n      requestHeaders: formattedObj.headers && formattedObj.headers.requestHeaders\n    };\n\n    Djaty.utils.resolveProperty(Djaty.constants.itemType.ajax, formattedObj, 'response', response, Djaty.config.trackingOptions);\n    Djaty.utils.resolveProperty(Djaty.constants.itemType.ajax, formattedObj, 'headers', headersData, Djaty.config.trackingOptions);\n    Djaty.utils.resolveProperty(Djaty.constants.itemType.ajax, formattedObj, 'requestTime', requestTime, Djaty.config.trackingOptions);\n\n    if (Djaty.trackingApp.isTimelineIgnored(formattedObj, Djaty.constants.itemType.ajax)) {\n      var _timelineItemIndex = Djaty.initApp.timeline.indexOf(formattedObj);\n\n      if (_timelineItemIndex !== -1) {\n        Djaty.initApp.timeline.splice(_timelineItemIndex, 1);\n      }\n\n      delete this.pendingRequests[formattedObj.reqId];\n\n      return cb({ isIgnored: true, state: state });\n    }\n\n    if ((target.status >= 500 || target.status === 0) && !isAborted) {\n      var sha256 = Djaty.libs.sha256;\n      formattedObj.hash = sha256(reqArgs.join(' ') + Djaty.trackingApp.agentId + Djaty.constants.itemType.ajax + formattedObj.status);\n\n      formattedObj.shortTitle = formattedObj.openParams.method + ' ' + new URL(formattedObj.openParams.url).pathname;\n\n      formattedObj.longTitle = Djaty.utils.limitString('Ajax: method ' + formattedObj.openParams.method + ' ' + formattedObj.openParams.url, Djaty.constants.titleLimit);\n\n      return cb({ formattedObj: formattedObj, type: 'error', state: state });\n    }\n\n    delete this.pendingRequests[formattedObj.reqId];\n\n    return cb({ formattedObj: formattedObj, state: state });\n  },\n  _getFullURL: function _getFullURL(url) {\n    var tmpAnchorElement = document.createElement('a');\n    tmpAnchorElement.href = url;\n\n    return tmpAnchorElement.href;\n  }\n};\n\n// Register ajaxTracker component to the parent Djaty tracking app.\nDjaty.trackingApp.addTracker(Djaty.constants.itemType.ajax, ajaxTracker);\n//# sourceMappingURL=ajaxTracking.js.map\n\n'use strict';\n\n/**\n* Tracking 'window.console' methods.\n*\n* This file is combined with other tracking files using 'gulp' then the generated\n* file will be injected by the extension or manually by including the file.\n*/\n\nvar consoleTracker = {\n  /* ###################################################################### */\n  /* ########################### PUBLIC METHODS ########################### */\n  /* ###################################################################### */\n\n  /** *********************** Initializing Obj **************************** */\n  /**\n  * Initialization of the tracker.\n  *\n  * @return void\n  */\n  init: function init() {},\n\n\n  /**\n  * Save Data into timeline.\n  *\n  * @param  {String} attrName\n  * @param  {Array} args\n  * @param  {Function} cb\n  * @return {void}\n  */\n  timelineFormatter: function timelineFormatter(_ref, cb) {\n    var attrName = _ref.attrName,\n        args = _ref.args;\n\n    if (typeof attrName !== 'string') {\n      throw new Error('Make sure you pass \"attrName\" parameter as a string');\n    }\n\n    if (!Array.isArray(args)) {\n      throw new Error('Make sure you pass \"args\" parameter as an array');\n    }\n\n    this._formatTimelineObj(attrName, args, cb);\n  },\n\n\n  /* ###################################################################### */\n  /* ########################### Private METHODS ########################## */\n  /* ###################################################################### */\n  /**\n   * Format timeline object.\n   *\n   * @param  {String} attrName\n   * @param  {Array} args\n   * @param  {Function} cb\n   * @return {void}\n   */\n  _formatTimelineObj: function _formatTimelineObj(attrName, args, cb) {\n    if (typeof attrName !== 'string') {\n      throw new Error('Make sure you pass \"attrName\" parameter as a string');\n    }\n\n    if (!Array.isArray(args)) {\n      throw new Error('Make sure you pass \"args\" parameter as an array');\n    }\n\n    if (!args.length) {\n      cb({ isIgnored: true });\n\n      return;\n    }\n\n    var timestamp = Date.now();\n    var sizeObject = Djaty.utils.sizeOfObject(args, Djaty.constants.requestSizeLimit);\n    var formattedObj = {\n      method: attrName,\n      timestamp: timestamp,\n      consoleParams: sizeObject.size === -1 ? [] : Djaty.utils.removeCircular(args),\n      isTrimmed: sizeObject.size === -1\n    };\n\n    var stringifiedParams = '[TOO_LONG_OBJECT_SIZE]';\n    if (Djaty.utils.resolveProperty(Djaty.constants.itemType.console, formattedObj, 'repetitionCount', 1, Djaty.config.trackingOptions) || attrName === 'error') {\n      var sha256 = Djaty.libs.sha256;\n\n      if (sizeObject.size === -1) {\n        formattedObj.hash = sha256(sizeObject.uniqueStr + Djaty.trackingApp.agentId + Djaty.constants.itemType.console + attrName);\n      } else {\n        stringifiedParams = JSON.stringify(formattedObj.consoleParams);\n        stringifiedParams = stringifiedParams.substr(1, stringifiedParams.length - 2);\n\n        formattedObj.hash = sha256(stringifiedParams + window.history.origin + attrName);\n      }\n    }\n\n    if (Djaty.trackingApp.isTimelineIgnored(formattedObj, Djaty.constants.itemType.console)) {\n      cb({ isIgnored: true });\n\n      return;\n    }\n\n    cb({ formattedObj: formattedObj });\n  }\n};\n\n// Register consoleTracker component to the parent Djaty tracking app.\nDjaty.trackingApp.addTracker(Djaty.constants.itemType.console, consoleTracker);\n//# sourceMappingURL=consoleTracking.js.map\n\n'use strict';\n\n/**\n* Tracking Forms.\n*\n* This file is combined with other tracking files using 'gulp' then the generated\n* file will be injected by the extension or manually by including the file.\n*/\n\n/* global Event */\n\nvar formTracker = {\n  localStorage: {},\n\n  /* ###################################################################### */\n  /* ########################### PUBLIC METHODS ########################### */\n  /* ###################################################################### */\n\n  /** ************************** Initializing Obj ************************* */\n  /**\n  * Initialization of the tracker.\n  *\n  * @param  {Object} localStorage: LocalStorage connection.\n  * @return void\n  */\n  init: function init(localStorage) {\n    if (!localStorage) {\n      throw new Error('formTracker can\\'t be initialized without storage');\n    }\n\n    this.localStorage = localStorage;\n  },\n\n\n  /**\n  * On form submit event handler.\n  *\n  * @param {Event} ev\n  * @param {Number} time\n  * @return void\n  */\n  timelineFormatter: function timelineFormatter(_ref) {\n    var ev = _ref.ev,\n        _ref$time = _ref.time,\n        time = _ref$time === undefined ? Date.now() : _ref$time;\n\n    if (!(Djaty.utils.isInstanceOf('Event', ev) && ev.type === 'submit')) {\n      throw new Error('timelineFormatter only accept events of type \\'submit\\'');\n    }\n\n    var inputs = [];\n    var isPwdForm = false;\n    var inputTypes = ['input', 'textarea', 'select'];\n\n    Djaty.utils.forOwn(ev.target, function (key, val) {\n      if (!(Djaty.utils.isDomElement(val) && inputTypes.some(function (type) {\n        return val.nodeName.toLowerCase() === type;\n      }) && val.type !== 'submit' && !((val.type === 'radio' || val.type === 'checkbox') && !val.checked))) {\n        return;\n      }\n\n      // Check if form has at least one password field\n      isPwdForm = val.type === 'password' && !isPwdForm ? !isPwdForm : isPwdForm;\n      var values = null;\n      if (val.type === 'select-multiple' || val.type === 'select-one') {\n        values = [];\n        Djaty.utils.forOwn(val.selectedOptions, function (index, option) {\n          values.push({\n            text: option.text,\n            value: option.value\n          });\n        });\n      }\n\n      var existingField = inputs.find(function (input) {\n        return input.name === val.name;\n      });\n\n      if (val.type === 'checkbox') {\n        if (existingField && val.checked) {\n          if (!Array.isArray(existingField.value)) {\n            existingField.value = [existingField.value];\n          }\n\n          existingField.value.push(val.value);\n          return;\n        }\n\n        if (!val.checked) {\n          return;\n        }\n      }\n\n      if (val.type === 'radio') {\n        if (existingField) {\n          existingField.value = val.checked ? val.value : existingField.value;\n          return;\n        }\n        val.value = val.checked ? val.value : '';\n      }\n\n      var inputInfo = {\n        type: val.type,\n        name: val.name || val.placeholder.toLowerCase() || val.type\n      };\n\n      if (values) {\n        inputInfo.values = values;\n      } else {\n        inputInfo.value = val.value;\n      }\n\n      inputs.push(inputInfo);\n    });\n\n    if (!inputs.length) {\n      return;\n    }\n\n    var formKey = isPwdForm ? 'pwdFormSubmission' : 'lastFormSubmission';\n    formTracker.localStorage.set(formKey, {\n      inputs: inputs,\n      url: window.location.href,\n      timestamp: time\n    });\n  }\n};\n\n// Register formTracker component to the parent Djaty tracking app.\nDjaty.trackingApp.addTracker('form', formTracker);\n//# sourceMappingURL=formTracking.js.map\n\n'use strict';\n\n/**\n* Tracking File Loading.\n*\n* This file is combined with other tracking files using 'gulp' then the generated\n* file will be injected by the extension or manually by including the file.\n*/\n\n/* global URL */\nvar fileTracker = {\n  /* ###################################################################### */\n  /* ########################### PUBLIC METHODS ########################### */\n  /* ###################################################################### */\n\n  /** ************************* Initializing Obj ************************** */\n  /**\n  * Initialization of the tracker.\n  *\n  * @return void\n  */\n  init: function init() {},\n\n\n  /**\n   * Save Data into timeline.\n   *\n   * @param  {Array} node\n   * @param  {String} target\n   * @param  {String} ev\n   * @param  {Number} time\n   * @param  {Function} cb\n   * @return {void}\n   */\n  timelineFormatter: function timelineFormatter(_ref, cb) {\n    var node = _ref.node,\n        target = _ref.target,\n        ev = _ref.ev,\n        time = _ref.time;\n\n    if (typeof target !== 'string' || typeof ev !== 'string') {\n      throw new Error('Make sure you pass \"timelineFormatter\" parameters correctly');\n    }\n\n    if (!Djaty.utils.isDomElement(node)) {\n      throw new Error('Make sure you pass \"node\" parameter as DOM element');\n    }\n\n    fileTracker._formatTimelineObj(node, target, ev, time, cb);\n  },\n\n\n  /* ###################################################################### */\n  /* ########################### Private METHODS ########################## */\n  /* ###################################################################### */\n  /**\n  * Format timeline object.\n  *\n  * @param  {Object} node\n  * @param  {String} target\n  * @param  {String} ev\n  * @param  {Number} time\n  * @param  {Function} cb\n  * @return {Function}\n  */\n  _formatTimelineObj: function _formatTimelineObj(node, target, ev, time, cb) {\n    if (typeof target !== 'string' || typeof ev !== 'string') {\n      throw new Error('Make sure you pass \"_formatTimelineObj\" parameters correctly');\n    }\n\n    if (!Djaty.utils.isDomElement(node)) {\n      throw new Error('Make sure you pass \"node\" parameter as DOM element');\n    }\n\n    var tagName = node.nodeName.toLowerCase();\n    var src = node[target];\n\n    if (typeof src === 'string' && ev === 'error' && Djaty.trackingApp.isIgnoredError(src)) {\n      return cb({ isIgnored: true, type: 'error' });\n    }\n\n    var formattedObj = {\n      tagName: tagName,\n      src: src,\n      fileStatus: ev,\n      timestamp: time\n    };\n\n    if (Djaty.trackingApp.isTimelineIgnored(formattedObj, Djaty.constants.itemType.file)) {\n      return cb({ isIgnored: true });\n    }\n\n    if (ev === 'error') {\n      var sha256 = Djaty.libs.sha256;\n      formattedObj.hash = sha256(src + Djaty.trackingApp.agentId + Djaty.constants.itemType.file);\n      formattedObj.shortTitle = 'File: ' + new URL(src).pathname;\n      formattedObj.longTitle = Djaty.utils.limitString('File: <' + tagName + '> ' + src, Djaty.constants.titleLimit);\n      return cb({ formattedObj: formattedObj, type: 'error' });\n    }\n\n    return cb({ formattedObj: formattedObj });\n  }\n};\n\n// Register fileTracker component to the parent Djaty tracking app.\nDjaty.trackingApp.addTracker(Djaty.constants.itemType.file, fileTracker);\n//# sourceMappingURL=fileTracking.js.map\n\n'use strict';\n\n/**\n * Tracking Errors.\n *\n * This file is combined with other tracking files using 'gulp' then the generated\n * file will be injected by the extension or manually by including the file.\n */\n\nvar exceptionTracker = {\n  /* ###################################################################### */\n  /* ########################### PUBLIC METHODS ########################### */\n  /* ###################################################################### */\n\n  /** ************************** Initializing Obj ************************* */\n  /**\n   * Initialization of the tracker.\n   *\n   * @return void\n   */\n  init: function init() {},\n\n\n  /**\n   * push stack trace into our time line\n   * @param  {Error} [err=null]\n   * @param  {String} msg: Used in case err param is null.\n   *                       One case could be:\n   *                       blog.sentry.io/2016/05/17/what-is-script-error.html\n   * @param  {Number} time\n   * @param  {Function} cb\n   * @return {void}\n   */\n  timelineFormatter: function timelineFormatter(_ref, cb) {\n    var _ref$err = _ref.err,\n        err = _ref$err === undefined ? null : _ref$err,\n        msg = _ref.msg,\n        _ref$time = _ref.time,\n        time = _ref$time === undefined ? Date.now() : _ref$time;\n\n    if (typeof msg === 'string' && Djaty.trackingApp.isIgnoredError(msg)) {\n      cb({ isIgnored: true, type: 'error' });\n      return;\n    }\n\n    var frameList = [];\n\n    if (err && err.stack) {\n      frameList = err.stack.split('\\n');\n\n      // Handle removing message from stacktrace except `Firefox`,\n      // it don't have a error message in his stacktrace.\n\n      var _Djaty$trackingApp$ge = Djaty.trackingApp.getAgentConstData(),\n          userAgent = _Djaty$trackingApp$ge.userAgent;\n\n      if (userAgent.browser.name !== 'Firefox') {\n        frameList.shift();\n      }\n    }\n\n    exceptionTracker._formatTimelineObj(err, msg, frameList, time, cb);\n  },\n\n\n  /* ###################################################################### */\n  /* ########################### Private METHODS ########################## */\n  /* ###################################################################### */\n  /**\n   * Format timeline object.\n   * @param  {Array} err\n   * @param  {String} message\n   * @param  {Object} stackframes\n   * @param  {Number} time\n   * @param  {Function} cb\n   * @return {Function} cb\n   * @TODO return false needs to be handled.\n   */\n  _formatTimelineObj: function _formatTimelineObj(err, message, stackframes, time, cb) {\n    var msg = err ? err.toString() : 'Error from an external resource and details are' + ' restricted by browser for security reasons. <a href=\"#\">Read more!</a>';\n    // if (!msg) {\n    //   msg = message ? message : 'Error';\n    // }\n\n    // If stack is generated, we need to remove our stack frames from it(Those\n    // frames include for example this function 'timelineFormatter'.\n    // Our frames will only exist in case the error is triggered after the djaty core\n    // loads. If error triggered with the initial tracker 'initApp' it will be\n    // saved into time line at once and without any processing with pure stack\n    // frames. Those frames will be processed and added directly inside timetime\n    // without being passed to timelineFormatter for example.\n    stackframes = stackframes.filter(function (frame) {\n      var functionName = frame.functionName;\n      if (functionName && functionName.match(/(timelineFormatter|_errHandler)/)) {\n        return false;\n      }\n\n      return frame;\n    });\n\n    // If no stackframes after filtering, this err is for sure thrown from our\n    // scripts and should rejected (not to be tracked).\n    if (stackframes.length === 0) {\n      // @TODO Handle our exceptions.\n      return cb({ isIgnored: true });\n    }\n\n    if (stackframes.length >= Djaty.config.stacktraceLimit) {\n      stackframes = stackframes.splice(0, Djaty.config.stacktraceLimit);\n    }\n\n    var sha256 = Djaty.libs.sha256;\n    var hash = sha256(JSON.stringify(stackframes[0]) + msg + Djaty.trackingApp.agentId + Djaty.constants.itemType.exception);\n\n    var details = err ? '\\nStacktrace: \\n' + err.stack : '';\n    var shortTitle = Djaty.utils.limitString('' + msg, Djaty.constants.titleLimit);\n    var longTitle = Djaty.utils.limitString('Unhandled Exception: ' + msg + ' . ' + details, Djaty.constants.titleLimit);\n\n    var formattedObj = {\n      // Important attr summary, it helps getting a string from the object.\n      // summary: `Unhandled Exception: ${msg}. ${details}`,\n      method: 'onerror',\n      timestamp: time,\n      stringifiedStack: err ? err.stack : '',\n      msg: msg,\n      hash: hash,\n      shortTitle: shortTitle,\n      longTitle: longTitle\n    };\n\n    Djaty.utils.resolveProperty(Djaty.constants.itemType.exception, formattedObj, 'repetitionCount', 1, Djaty.config.trackingOptions);\n\n    if (Djaty.trackingApp.isTimelineIgnored(formattedObj, Djaty.constants.itemType.exception)) {\n      return cb({ isIgnored: true });\n    }\n\n    return cb({ formattedObj: formattedObj, type: 'error' });\n  }\n};\n\n// Register errorTracker component to the parent Djaty tracking app.\nDjaty.trackingApp.addTracker(Djaty.constants.itemType.exception, exceptionTracker);\n//# sourceMappingURL=exceptionTracker.js.map\n\n'use strict';\n\n/**\n * Tracking 'Navigation' methods.\n *\n * This file is combined with other tracking files using 'gulp' then the generated\n * file will be injected by the extension or manually by including the file.\n */\n\nvar navigationTracker = {\n  /* ###################################################################### */\n  /* ########################### PUBLIC METHODS ########################### */\n  /* ###################################################################### */\n\n  /** *********************** Initializing Obj **************************** */\n  /**\n   * Initialization of the tracker.\n   *\n   * @return void\n   */\n  init: function init() {},\n\n\n  /**\n   * Save Data into timeline.\n   *\n   * @param  {String} itemType\n   * @param  {Object} ev\n   * @param  {String} url\n   * @param  {Number} time\n   * @param  {Function} cb\n   * @return {void}\n   */\n  timelineFormatter: function timelineFormatter(_ref, cb) {\n    var itemType = _ref.itemType,\n        ev = _ref.ev,\n        url = _ref.url,\n        _ref$time = _ref.time,\n        time = _ref$time === undefined ? Date.now() : _ref$time;\n\n    if (typeof itemType !== 'string') {\n      throw new Error('Make sure you pass \"itemType\" parameter as a string');\n    }\n    navigationTracker._formatTimelineObj({ attrName: itemType, ev: ev, currentTime: time, url: url }, cb);\n  },\n\n\n  /* ###################################################################### */\n  /* ########################### Private METHODS ########################## */\n  /* ###################################################################### */\n  /**\n   * Format timeline object.\n   *\n   * @param {String} attrName\n   * @param {Object} ev\n   * @param {Number} currentTime\n   * @param {String} url\n   * @param {Function} cb\n   * @returns {*}\n   * @private\n   */\n  _formatTimelineObj: function _formatTimelineObj(_ref2, cb) {\n    var attrName = _ref2.attrName,\n        ev = _ref2.ev,\n        currentTime = _ref2.currentTime,\n        url = _ref2.url;\n\n    if (typeof attrName !== 'string') {\n      throw new Error('Make sure you pass \"attrName\" parameter as a string');\n    }\n\n    var formattedObj = {\n      method: ev.type,\n      curPageUrl: url,\n      timestamp: currentTime\n    };\n\n    var pageTitle = Djaty.utils.limitString(document.title, Djaty.constants.titleLimit);\n\n    Djaty.utils.resolveProperty(Djaty.constants.itemType.navigation, formattedObj, 'title', pageTitle, Djaty.config.trackingOptions);\n    Djaty.utils.resolveProperty(Djaty.constants.itemType.navigation, formattedObj, 'state', ev.state, Djaty.config.trackingOptions);\n\n    if (Djaty.trackingApp.isTimelineIgnored(formattedObj, Djaty.constants.itemType.navigation)) {\n      return cb({ isIgnored: true });\n    }\n\n    return cb({ formattedObj: formattedObj });\n  }\n};\n\n// Register consoleTracker component to the parent Djaty tracking app.\nDjaty.trackingApp.addTracker(Djaty.constants.itemType.navigation, navigationTracker);\n//# sourceMappingURL=navigationTracker.js.map\n\n'use strict';\n\n/**\n* Tracking Click.\n*\n* This file is combined with other tracking files using 'gulp' then the generated\n* file will be injected by the extension or manually by including the file.\n*/\n\nvar clickTracker = {\n  /* ###################################################################### */\n  /* ########################### PUBLIC METHODS ########################### */\n  /* ###################################################################### */\n\n  /** ************************* Initializing Obj ************************** */\n  /**\n  * Initialization of the tracker.\n  *\n  * @return void\n  */\n  init: function init() {},\n\n\n  /**\n   * Save Data into timeline.\n   *\n   * @param  {Event} ev\n   * @param  {Number} time\n   * @param  {Function} cb\n   * @return {void}\n   */\n  timelineFormatter: function timelineFormatter(_ref, cb) {\n    var ev = _ref.ev,\n        time = _ref.time;\n\n    if (!Djaty.utils.isInstanceOf('Event', ev)) {\n      throw new Error('Make sure you pass \"timelineFormatter\" parameters correctly');\n    }\n\n    clickTracker._formatTimelineObj(ev, time, cb);\n  },\n\n\n  /* ###################################################################### */\n  /* ########################### Private METHODS ########################## */\n  /* ###################################################################### */\n  /**\n  * Format timeline object.\n  *\n  * @param  {Event} ev\n  * @param  {Number} time\n  * @param  {Function} cb\n  * @return {Function}\n  */\n  _formatTimelineObj: function _formatTimelineObj(ev, time, cb) {\n    if (!Djaty.utils.isInstanceOf('Event', ev)) {\n      throw new Error('Make sure you pass \"_formatTimelineObj\" parameters correctly');\n    }\n\n    var elementPath = this.getElementPath(ev.target).slice(3);\n    if (elementPath.length >= Djaty.constants.elementPathMaxLength) {\n      elementPath = elementPath.slice(Djaty.constants.elementPathMaxLength - elementPath.length - 1);\n    }\n\n    var formattedObj = {\n      tagName: ev.target.nodeName.toLowerCase(),\n      path: elementPath,\n      timestamp: time\n    };\n\n    return cb({ formattedObj: formattedObj });\n  },\n  getElementPath: function getElementPath(el) {\n    var elNumber = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n    if (!el.parentElement || elNumber >= 5) {\n      return '';\n    }\n\n    var elName = el.nodeName.toLocaleLowerCase();\n    var elClassList = el.classList.length && (el.className || '').trim() ? '.' + el.className.split(' ').join('.') : '';\n\n    if (elNumber === 1) {\n      elClassList += el.type ? '[type=' + el.type + ']' : '';\n      elClassList += el.name ? '[name=' + el.name + ']' : '';\n      elClassList += el.innerText ? '[text=' + el.innerText.trim().slice(0, 20) + ']' : '';\n    }\n\n    return this.getElementPath(el.parentElement, ++elNumber) + ' > ' + elName + elClassList;\n  }\n};\n\n// Register clickTracker component to the parent Djaty tracking app.\nDjaty.trackingApp.addTracker(Djaty.constants.itemType.click, clickTracker);\n//# sourceMappingURL=clickTracker.js.map\n\n'use strict';\n\n/**\n * Auto report our bugs to djaty server.\n *\n * When `Djaty.logger.error` is fired and `reportDjatyCrashes` still `true` we trigger auto\n * reporting for current logs then destroy Djaty then show error for user to know that\n * something went wrong.\n *\n * In case of user disable `reportDjatyCrashes` flag just destroy and show error for user to know\n * that something went wrong and ask him to re-enable `reportDjatyCrashes` flag to have better\n * experience.\n */\n\n// eslint-disable-next-line no-unused-vars\nvar autoReport = {\n  isInitiated: false,\n  logsFormattingCb: null,\n  exceptionFormattingCb: null,\n  constData: null,\n\n  autoReport: function autoReport(loggerTimelineItems, logErrorParams) {\n    var _this = this;\n\n    try {\n      var errorMessage = 'Something went wrong with Djaty';\n      if (!this.isInitiated) {\n        return;\n      }\n\n      if (!Djaty.config.reportDjatyCrashes) {\n        errorMessage += ' but we are unable to report it.' + ' For a better experience and to help us fix those kinds of problems in the future,' + ' please enable \\'reportDjatyCrashes\\' option. You may need to refresh the page' + ' to enable Djaty again as it\\'s just exited to avoid unexpected behaviours';\n\n        Djaty.destroy(errorMessage);\n\n        // eslint-disable-next-line no-console\n        console.error(errorMessage);\n\n        return;\n      }\n\n      // I disable tracking to avoid reporting unneeded bugs with\n      // corrupted state during reporting the original bug.\n      Djaty.initApp.destroy();\n\n      var timeline = [];\n      loggerTimelineItems.forEach(function (item) {\n        return _this.logsFormattingCb(item, function (_ref) {\n          var formattedObj = _ref.formattedObj;\n          return _this._addItemToTimeline(formattedObj, timeline, 'console');\n        });\n      });\n\n      var error = logErrorParams[logErrorParams.length - 1] instanceof Error ? logErrorParams[logErrorParams.length - 1] : new Error(logErrorParams[0]);\n\n      var item = {\n        err: error,\n        msg: error.message,\n        time: Date.now(),\n        itemType: Djaty.constants.itemType.exception\n      };\n\n      this.exceptionFormattingCb(item, function (_ref2) {\n        var formattedObj = _ref2.formattedObj;\n        return _this._addItemToTimeline(formattedObj, timeline, 'exception');\n      });\n\n      var lastTimelineItem = timeline[timeline.length - 1];\n\n      var payload = Djaty.utils.assign({}, this.constData, {\n        agentDataPatch: [{\n          timeline: timeline,\n          shortTitle: lastTimelineItem.shortTitle,\n          longTitle: lastTimelineItem.longTitle,\n          hash: lastTimelineItem.hash,\n          curUrl: window.location.href,\n          bugType: lastTimelineItem.itemType,\n          customData: [{ clientProjectApiKey: Djaty.config.apiKey }]\n        }]\n      });\n\n      delete lastTimelineItem.shortTitle;\n\n      var stringifiedPayload = JSON.stringify(payload);\n      var url = '' + Djaty.config.bugsURL + Djaty.config.api + Djaty.config.apiBugsUrl + '?reportedAgent=' + Djaty.trackingApp.agentId;\n\n      Djaty.utils.djatyAjax('POST', url, stringifiedPayload, function (err) {\n        if (err) {\n          errorMessage += ' but we are unable to report it due to an internal server problem. You may need' + ' to refresh the page to enable Djaty again as it\\'s just exited to avoid unexpected behaviours';\n        } else {\n          errorMessage += ', reported and we are working on it. You may need to refresh the page to' + ' enable Djaty again as it\\'s just exited to avoid unexpected behaviours';\n        }\n\n        Djaty.destroy(errorMessage);\n\n        // eslint-disable-next-line no-console\n        console.error(errorMessage);\n      });\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error('Something went wrong with Djaty but we are unable to report it due to an' + ' internal problem so it\\'ll be very appreciated if you contacted us to report this' + ' problem. You may need to refresh the page to enable Djaty again.');\n    }\n  },\n  init: function init(constData, formattingCb, exceptionFormattingCb) {\n    var _this2 = this;\n\n    if (this.isInitiated) {\n      return this;\n    }\n\n    this.isInitiated = true;\n    this.constData = constData;\n    this.logsFormattingCb = formattingCb;\n    this.exceptionFormattingCb = exceptionFormattingCb;\n\n    var logTimeline = Djaty.logger.logTimeline;\n    var loggedErrors = logTimeline.filter(function (item) {\n      return item.method === 'error' || item.attrName === 'error';\n    });\n\n    if (loggedErrors.length) {\n      loggedErrors.forEach(function (item) {\n        var tmpTimeline = logTimeline.slice(0, logTimeline.indexOf(item) + 1);\n\n        _this2.autoReport(tmpTimeline, item.args);\n      });\n    }\n\n    Djaty.logger.registerAutoReportCb(this.autoReport.bind(this));\n\n    return this;\n  },\n  destroy: function destroy() {\n    this.isInitiated = false;\n    Djaty.logger.removeAutoReportCb();\n  },\n  _addItemToTimeline: function _addItemToTimeline(formattedObj, timeline, type) {\n    if (!formattedObj) {\n      return;\n    }\n\n    formattedObj.itemType = Djaty.constants.itemType[type];\n    timeline.push(formattedObj);\n  }\n};\n//# sourceMappingURL=autoReport.js.map\n"]}